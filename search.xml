<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>pythonå¤šè¿›ç¨‹å¤„ç†æ•°æ®</title>
      <link href="/2023/04/25/python%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/04/25/python%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹"><a href="#å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹"></a>å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹</h1><p>è¿›ç¨‹(multiprocess)æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…ï¼ˆå†…å­˜ï¼Œæ˜¾å¡ï¼Œç£ç›˜ï¼‰çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹(Thread)æ˜¯æ‰§è¡Œè°ƒåº¦ï¼ˆå³cpuè°ƒåº¦ï¼‰çš„æœ€å°å•ä½ï¼ˆcpuçœ‹åˆ°çš„éƒ½æ˜¯çº¿ç¨‹è€Œä¸æ˜¯è¿›ç¨‹ï¼‰ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹çš„èµ„æºã€‚</p><p>cpuç‰©ç†æ ¸æ•°å®é™…ä¸Šæ˜¯å¯ä»¥åŒæ—¶å¹¶è¡Œçš„çº¿ç¨‹æ•°é‡ï¼Œç”±äºè¶…çº¿ç¨‹æŠ€æœ¯ï¼Œéƒ¨åˆ†cpuå®é™…ä¸Šå¯ä»¥å¹¶è¡Œçš„çº¿ç¨‹æ•°é‡é€šå¸¸æ˜¯ç‰©ç†æ ¸æ•°çš„ä¸¤å€ï¼Œè¿™ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„æ ¸æ•°ã€‚</p><p>å¤„ç†ä»»åŠ¡å¯ä»¥åˆ†ä¸ºè®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹ï¼Œå‡è®¾ä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œå¯¹è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ã€<strong style="color:#00b050;">æ ¸å¿ƒæ•°</strong>ã€‘ä¸ªçº¿ç¨‹ï¼Œå°±å¯ä»¥å æ»¡cpuèµ„æºï¼Œè¿›è€Œå¯ä»¥å……åˆ†åˆ©ç”¨cpuï¼Œå¦‚æœå†å¤šï¼Œå°±ä¼šé€ æˆé¢å¤–çš„å¼€é”€ï¼›å¯¹äºIOå¯†é›†å‹ä»»åŠ¡ï¼ˆæ¶‰åŠåˆ°ç½‘ç»œã€ç£ç›˜IOçš„ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼‰ï¼Œçº¿ç¨‹ç”±äºè¢«IOé˜»å¡ï¼Œå¦‚æœä»ç„¶ç”¨ã€æ ¸å¿ƒæ•°ã€‘ä¸ªçº¿ç¨‹ï¼Œcpuæ˜¯è·‘ä¸æ»¡çš„ï¼Œäºæ˜¯å¯ä»¥ä½¿ç”¨<strong style="color:#00b050;">æ›´å¤šä¸ªçº¿ç¨‹</strong>æ¥æé«˜cpuä½¿ç”¨ç‡ã€‚</p><h1 id="pythonä¸­çš„å¹¶è¡Œ"><a href="#pythonä¸­çš„å¹¶è¡Œ" class="headerlink" title="pythonä¸­çš„å¹¶è¡Œ"></a>pythonä¸­çš„å¹¶è¡Œ</h1><p>å¯¹äºå…¶ä»–è¯­è¨€ï¼Œå¤šæ ¸CPUæ”¯æŒå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œã€‚ä½†åœ¨Pythonä¸­ï¼Œæ— è®ºæ˜¯å•æ ¸è¿˜æ˜¯å¤šæ ¸cpuï¼Œä¸€ä¸ªè¿›ç¨‹åŒä¸€æ—¶é—´åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œã€‚å…¶æ ¹æºæ˜¯ <strong style="color:#00b050;">GILï¼ˆGlobal Interpreter Lock å…¨å±€è§£é‡Šå™¨é”)</strong> çš„å­˜åœ¨ã€‚</p><p>è®¾è®¡åŸå› ï¼šå¤šçº¿ç¨‹ä¼šå…±äº«è¿›ç¨‹ä¸­çš„åœ°å€ç©ºé—´å’Œæ•°æ®ç©ºé—´ï¼Œä¸€ä¸ªçº¿ç¨‹çš„æ•°æ®å¯ä»¥ç›´æ¥æä¾›ç»™å…¶ä»–çº¿ç¨‹ä½¿ç”¨ï¼Œç‰¹åˆ«å®¹æ˜“é€ æˆå˜é‡å€¼çš„æ··ä¹±ï¼Œæ‰€ä»¥é€šè¿‡çº¿ç¨‹é”æ¥é™åˆ¶çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¿æŠ¤æ•°æ®å®‰å…¨ã€‚æŸä¸ªçº¿ç¨‹æƒ³è¦æ‰§è¡Œï¼Œå¿…é¡»å…ˆæ‹¿åˆ° GILï¼Œåœ¨ä¸€ä¸ª Python è¿›ç¨‹ä¸­ï¼ŒGIL åªæœ‰ä¸€ä¸ªã€‚æ‹¿ä¸åˆ°é€šè¡Œè¯çš„çº¿ç¨‹ï¼Œå°±ä¸å…è®¸è¿›å…¥ CPU æ‰§è¡Œã€‚æ‰€ä»¥å¤šçº¿ç¨‹åœ¨pythonä¸­æ˜¯è¡Œä¸é€šçš„ã€‚pythonä¸­çš„å¹¶è¡Œä¸»è¦æŒ‡çš„æ˜¯è¿›ç¨‹å¹¶è¡Œï¼Œ</p><p>é€šè¿‡è°ƒç”¨ Python è‡ªå¸¦çš„å¤šè¿›ç¨‹åº“ <code>Multiprocessing</code>,å¯ä»¥è½»æ¾çš„åœ¨æœ¬åœ°ç”µè„‘ä¸Šè¿›è¡Œå¤šæ ¸å¹¶è¡Œè®¡ç®—</p><h1 id="multiprocessing"><a href="#multiprocessing" class="headerlink" title="multiprocessing"></a>multiprocessing</h1><p>è¿™ä¸ªæ¨¡å—ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><h2 id="multiprocess-Process"><a href="#multiprocess-Process" class="headerlink" title="multiprocess.Process"></a>multiprocess.Process</h2><h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p>multiprocess.Process([group [, target [, name [, args [, kwargs]]]]])ï¼Œç”±è¯¥ç±»å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡ï¼Œè¡¨ç¤ºä¸€ä¸ªå­è¿›ç¨‹ä¸­çš„ä»»åŠ¡ï¼ˆå°šæœªå¯åŠ¨ï¼‰</p><h4 id="å‚æ•°ï¼š"><a href="#å‚æ•°ï¼š" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h4><ul><li>groupå‚æ•°æœªä½¿ç”¨ï¼Œå€¼å§‹ç»ˆä¸ºNone</li><li>targetè¡¨ç¤ºè°ƒç”¨å¯¹è±¡ï¼Œå³å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡</li><li>argsè¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„ä½ç½®å‚æ•°å…ƒç»„ï¼Œargs&#x3D;(1,2,â€™egonâ€™,)</li><li>kwargsè¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„å­—å…¸ï¼Œkwargs&#x3D;{â€˜nameâ€™:â€™egonâ€™,â€™ageâ€™:18}</li><li>nameä¸ºå­è¿›ç¨‹çš„åç§°</li></ul><p>æ³¨æ„ï¼š</p><ol><li>éœ€è¦ä½¿ç”¨å…³é”®å­—çš„æ–¹å¼æ¥æŒ‡å®šå‚æ•°</li><li>argsæŒ‡å®šçš„ä¸ºä¼ ç»™targetå‡½æ•°çš„ä½ç½®å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå…ƒç»„å½¢å¼ï¼Œå¿…é¡»æœ‰é€—å·</li></ol><h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><ul><li>p.start()ï¼šå¯åŠ¨è¿›ç¨‹ï¼Œå¹¶è°ƒç”¨è¯¥å­è¿›ç¨‹ä¸­çš„p.run()</li><li>p.run()ï¼šè¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³•ï¼Œæ­£æ˜¯å®ƒå»è°ƒç”¨targetæŒ‡å®šçš„å‡½æ•°ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ç±»çš„ç±»ä¸­ä¸€å®šè¦å®ç°è¯¥æ–¹æ³•</li><li>p.terminate()ï¼šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹pï¼Œä¸ä¼šè¿›è¡Œä»»ä½•æ¸…ç†æ“ä½œï¼Œå¦‚æœpåˆ›å»ºäº†å­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹å°±æˆäº†åƒµå°¸è¿›ç¨‹ï¼Œä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦ç‰¹åˆ«å°å¿ƒè¿™ç§æƒ…å†µã€‚å¦‚æœpè¿˜ä¿å­˜äº†ä¸€ä¸ªé”é‚£ä¹ˆä¹Ÿå°†ä¸ä¼šè¢«é‡Šæ”¾ï¼Œè¿›è€Œå¯¼è‡´æ­»é”</li><li>p.is_alive()ï¼šå¦‚æœpä»ç„¶è¿è¡Œï¼Œè¿”å›True</li><li>p.join([timeout])ï¼šä¸»çº¿ç¨‹ç­‰å¾…pç»ˆæ­¢ï¼ˆå¼ºè°ƒï¼šæ˜¯ä¸»çº¿ç¨‹å¤„äºç­‰çš„çŠ¶æ€ï¼Œè€Œpæ˜¯å¤„äºè¿è¡Œçš„çŠ¶æ€ï¼‰ã€‚timeoutæ˜¯å¯é€‰çš„è¶…æ—¶æ—¶é—´ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œp.joinåªèƒ½joinä½startå¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸èƒ½joinä½runå¼€å¯çš„è¿›ç¨‹</li></ul><h2 id="multiprocessing-Pool"><a href="#multiprocessing-Pool" class="headerlink" title="multiprocessing.Pool()"></a>multiprocessing.Pool()</h2><p>å½“è¢«æ“ä½œå¯¹è±¡æ•°ç›®ä¸å¤§æ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨multiprocessingä¸­çš„ProcessåŠ¨æ€æˆç”Ÿå¤šä¸ªè¿›ç¨‹ï¼Œåå‡ ä¸ªè¿˜å¥½ï¼Œä½†å¦‚æœæ˜¯ä¸Šç™¾ä¸ªï¼Œä¸Šåƒä¸ªç›®æ ‡ï¼Œæ‰‹åŠ¨çš„å»é™åˆ¶è¿›ç¨‹æ•°é‡å´åˆå¤ªè¿‡ç¹çï¼Œæ­¤æ—¶å¯ä»¥å‘æŒ¥è¿›ç¨‹æ± çš„åŠŸæ•ˆã€‚</p><p>Poolå¯ä»¥æä¾›æŒ‡å®šæ•°é‡çš„è¿›ç¨‹ä¾›ç”¨æˆ·è°ƒç”¨ï¼Œå½“æœ‰æ–°çš„è¯·æ±‚æäº¤åˆ°poolä¸­æ—¶ï¼Œå¦‚æœæ± è¿˜æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ç”¨æ¥æ‰§è¡Œè¯¥è¯·æ±‚ï¼›ä½†å¦‚æœæ± ä¸­çš„è¿›ç¨‹æ•°å·²ç»è¾¾åˆ°è§„å®šæœ€å¤§å€¼ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚å°±ä¼šç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­æœ‰è¿›ç¨‹ç»“æŸï¼Œæ‰ä¼šåˆ›å»ºæ–°çš„è¿›ç¨‹æ¥å®ƒã€‚</p><h3 id="æ¥å£-1"><a href="#æ¥å£-1" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p>multiprocessing.pool.Pool(processes&#x3D;None, initializer&#x3D;None, initargs&#x3D;(), maxtasksperchild&#x3D;None, context&#x3D;None)</p><h4 id="å‚æ•°ï¼š-1"><a href="#å‚æ•°ï¼š-1" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h4><ul><li>processes â€” è¿›ç¨‹æ± ä¸­è¿›ç¨‹æ•°é‡ï¼Œå¦‚æœä¸º Noneï¼Œåˆ™ä½¿ç”¨ os.cpu_count() è¿”å›çš„å€¼</li><li>initializer â€” å¦‚æœè¯¥å‚æ•°ä¸ä¸º Noneï¼Œåˆ™æ‰€æœ‰è¿›ç¨‹æ± ä¸­çš„è¿›ç¨‹å¯åŠ¨æ—¶éƒ½ä¼šå…ˆæ‰§è¡Œ initializer(*initargs)</li><li>maxtasksperchild â€” å¦‚æœè¯¥å‚æ•°ä¸ä¸º Noneï¼Œåˆ™è¿›ç¨‹åœ¨æ‰§è¡Œ maxtasksperchild æ¬¡ä»»åŠ¡åä¼šè¢«è‡ªåŠ¨é”€æ¯ã€é‡å¯</li><li>context â€” ç”¨äºæŒ‡å®šè¿›ç¨‹æ± ä¸­è¿›ç¨‹è¿è¡Œçš„ä¸Šä¸‹æ–‡</li></ul><h3 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h3><ul><li><p>1ã€apply()Â â€” è¯¥å‡½æ•°ç”¨äºä¼ é€’ä¸å®šå‚æ•°ï¼Œä¸»è¿›ç¨‹ä¼šè¢«é˜»å¡ç›´åˆ°å‡½æ•°æ‰§è¡Œç»“æŸï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼Œå¹¶ä¸”3.xä»¥åä¸å†å‡ºç°ï¼‰ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p></li><li><p>apply(func, args&#x3D;(), kwds&#x3D;{})</p></li><li><p>2ã€apply_asyncÂ â€” ä¸applyç”¨æ³•ä¸€è‡´ï¼Œä½†å®ƒæ˜¯éé˜»å¡çš„ä¸”æ”¯æŒç»“æœè¿”å›åè¿›è¡Œå›è°ƒï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p></li><li><p>apply_async(func[, args&#x3D;()[, kwds&#x3D;{}[, callback&#x3D;None]]])</p></li><li><p>3ã€map()Â â€” Poolç±»ä¸­çš„mapæ–¹æ³•ï¼Œä¸å†…ç½®çš„mapå‡½æ•°ç”¨æ³•åŸºæœ¬ä¸€è‡´ï¼Œå®ƒä¼šä½¿è¿›ç¨‹é˜»å¡ç›´åˆ°ç»“æœè¿”å›ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p></li><li><p>map(func, iterable, chunksize&#x3D;None)</p></li><li><p>æ³¨æ„ï¼šè™½ç„¶ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¿…é¡»åœ¨æ•´ä¸ªé˜Ÿåˆ—éƒ½å°±ç»ªåï¼Œç¨‹åºæ‰ä¼šè¿è¡Œå­è¿›ç¨‹ã€‚</p></li><li><p>4ã€map_async()Â â€” ä¸mapç”¨æ³•ä¸€è‡´ï¼Œä½†æ˜¯å®ƒæ˜¯éé˜»å¡çš„ã€‚å…¶æœ‰å…³äº‹é¡¹è§apply_asyncï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p></li><li><p>map_async(func, iterable, chunksize, callback)</p></li><li><p>5ã€close()Â â€” å…³é—­è¿›ç¨‹æ± ï¼ˆpoolï¼‰ï¼Œä½¿å…¶ä¸åœ¨æ¥å—æ–°çš„ä»»åŠ¡ã€‚</p></li><li><p>6ã€terminal()Â â€” ç»“æŸå·¥ä½œè¿›ç¨‹ï¼Œä¸åœ¨å¤„ç†æœªå¤„ç†çš„ä»»åŠ¡ã€‚</p></li><li><p>7ã€join()Â â€” ä¸»è¿›ç¨‹é˜»å¡ç­‰å¾…å­è¿›ç¨‹çš„é€€å‡ºï¼Œ joinæ–¹æ³•è¦åœ¨closeæˆ–terminateä¹‹åä½¿ç”¨ã€‚</p></li></ul><h1 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h1><p>æˆ‘ä¸»è¦ç”¨å¤šè¿›ç¨‹æ¥å¤„ç†æ•°æ®ã€ç”»å›¾ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ¨¡æ¿:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np                      </span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">single_worker</span>(<span class="params">file_paths</span>):</span><br><span class="line">    <span class="comment"># å¤„ç†æ–‡ä»¶å¯¹åº”çš„è·¯å¾„çš„æ•°æ®</span></span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> file_path <span class="keyword">in</span> file_paths:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data.append(f.read())</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å›¾</span></span><br><span class="line">    plt.plot(data)</span><br><span class="line">    plt.show()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ‰“å°è¿›ç¨‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;finishing&quot;</span>,Path(file_path).name) </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰é”™è¯¯å›è°ƒå‡½æ•°ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œèƒ½å°†é”™è¯¯åœ¨ä¸»è¿›ç¨‹ä¸­æ‰“å°å‡ºæ¥       </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">error_callback</span>(<span class="params">e</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Error:&#x27;</span>, e)        </span><br><span class="line"></span><br><span class="line">  <span class="comment"># å°†æ€»æ•°æ®é›†è¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²æˆå­æ•°æ®é›†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_split</span>(<span class="params">path,batch_num</span>):</span><br><span class="line">  path = <span class="built_in">list</span>(Path(path).glob(<span class="string">&quot;*&quot;</span>))</span><br><span class="line">  <span class="comment"># æ•°æ®é›†é•¿åº¦</span></span><br><span class="line">  Len_path = <span class="built_in">len</span>(pathlist)            </span><br><span class="line">  param_dict =&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">## æ•°æ®åˆ†å‰²</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_num):</span><br><span class="line">    task = <span class="string">&quot;task&quot;</span> + <span class="built_in">str</span>(i)</span><br><span class="line">    param_dict[task] = [(pathlist[i])]</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">if</span> Len_path &gt;= batch_num:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_num,Len_path):</span><br><span class="line">      task = <span class="string">&quot;task&quot;</span> + <span class="built_in">str</span>(<span class="built_in">int</span>(i%batch_num))</span><br><span class="line">      param_dict[task].append(pathlist[i])</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> param_dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_t = datetime.datetime.now()</span><br><span class="line">    <span class="comment"># æŸ¥çœ‹cpuæ ¸æ•°</span></span><br><span class="line">    num_cores = <span class="built_in">int</span>(mp.cpu_count())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœ¬åœ°è®¡ç®—æœºæœ‰: &quot;</span> + <span class="built_in">str</span>(num_cores) + <span class="string">&quot; æ ¸å¿ƒ&quot;</span>)</span><br><span class="line">    <span class="comment"># å¼€å¯æ ¸æ ¸æ•°ç›¸ç­‰çš„è¿›ç¨‹æ•°ç›®</span></span><br><span class="line">    <span class="comment"># pool = mp.Pool(num_cores)    </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">## éå†è¯»å–å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰å­æ–‡ä»¶å¤¹,å¹¶ä¸”è½¬åŒ–ä¸ºåˆ—è¡¨,æˆ‘è¿™é‡Œåªå¼€å¯8ä¸ªè¿›ç¨‹</span></span><br><span class="line">    batch_num = <span class="number">8</span></span><br><span class="line">    param_dict = task_split(Path.cwd(),batch_num)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¼€å¯å¤šè¿›ç¨‹å¤„ç†æ•°æ®</span></span><br><span class="line">    pool = mp.Pool(batch_num)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> name, param <span class="keyword">in</span> param_dict.items():</span><br><span class="line">      pool.apply_async(single_worker, args=(param,),error_callback=error_callback)</span><br><span class="line">      </span><br><span class="line">    <span class="comment"># å…³é—­è¿›ç¨‹æ± </span></span><br><span class="line">    pool.close()</span><br><span class="line">    <span class="comment"># ç­‰å¾…ä»»åŠ¡å®Œæˆ</span></span><br><span class="line">    pool.join()</span><br><span class="line"></span><br><span class="line">    end_t = datetime.datetime.now()</span><br><span class="line">    elapsed_sec = (end_t - start_t).total_seconds()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¤šè¿›ç¨‹è®¡ç®— å…±æ¶ˆè€—: &quot;</span> + <span class="string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(elapsed_sec) + <span class="string">&quot; ç§’&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘å¤„ç†10ä¸ªç»“æœï¼Œå¦‚æœä½¿ç”¨å•è¿›ç¨‹éœ€è¦20å·¦å³ï¼Œå¼€å¯8ä¸ªè¿›ç¨‹ï¼Œå¹³å‡æ€»æ—¶é—´èƒ½å¤Ÿå‡å°‘åˆ°2sï¼Œå¤šè¿›ç¨‹æ•ˆæœéå¸¸æ˜æ˜¾ã€‚</p><p>ğŸŒŸæ³¨æ„ï¼š</p><p>å¿…é¡»æŠŠä¸»è¿›ç¨‹å†™åœ¨ã€Œç¨‹åºçš„å…¥å£ã€æ‰èƒ½æ­£å¸¸è¿è¡Œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ....</span><br></pre></td></tr></table></figure><p>è¿™ä¹ˆåšï¼Œèƒ½å¤Ÿé¿å…é‡å¤æ‰§è¡Œä¸»è¿›ç¨‹</p><h1 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h1><p><a href="https://zhuanlan.zhihu.com/p/208996070">https://zhuanlan.zhihu.com/p/208996070</a></p><p><a href="https://zhuanlan.zhihu.com/p/103135242">https://zhuanlan.zhihu.com/p/103135242</a></p><p><a href="https://www.cnblogs.com/SkyOceanchen/p/11537587.html">https://www.cnblogs.com/SkyOceanchen/p/11537587.html</a></p><p><a href="https://zhuanlan.zhihu.com/p/340965963">https://zhuanlan.zhihu.com/p/340965963</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> multiprocess </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåˆ¶ä½œå›¾ç‰‡ppt</title>
      <link href="/2023/04/24/python%E5%88%B6%E4%BD%9C%E5%9B%BE%E7%89%87ppt/"/>
      <url>/2023/04/24/python%E5%88%B6%E4%BD%9C%E5%9B%BE%E7%89%87ppt/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h1><p>å½“éœ€è¦æœ‰å¤§é‡ç±»ä¼¼çš„å›¾ç‰‡ç»“æœéœ€è¦åˆ†æçš„æ—¶å€™ï¼Œä¸€ä¸ªä¸€ä¸ªæ’å…¥pptæ¯”è¾ƒè´¹æ—¶é—´ï¼Œè€Œä¸”ä¸‡ä¸€é¡ºåºé”™äº†å°±æ˜¯ç¾éš¾ï¼Œpythonçš„Pillowåº“å¯ä»¥è¯»å–å’Œæ“ä½œå›¾ç‰‡ï¼Œè€Œpython-pptxåº“å¯ä»¥åˆ›å»ºPPTæ–‡ä»¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h1 id="åº“å®‰è£…"><a href="#åº“å®‰è£…" class="headerlink" title="åº“å®‰è£…"></a>åº“å®‰è£…</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install python-pptx</span><br></pre></td></tr></table></figure><h1 id="å•ä¸ªç›®å½•"><a href="#å•ä¸ªç›®å½•" class="headerlink" title="å•ä¸ªç›®å½•"></a>å•ä¸ªç›®å½•</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pptx <span class="keyword">import</span> Presentation</span><br><span class="line"><span class="keyword">from</span> pptx.util <span class="keyword">import</span> Inches</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„PPTæ–‡ä»¶</span></span><br><span class="line">prs = Presentation()</span><br><span class="line"><span class="comment"># å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line">img_folder = <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="comment"># å®šä¹‰æ¯é¡µæ˜¾ç¤ºçš„å›¾ç‰‡æ•°é‡</span></span><br><span class="line">pics_per_page = <span class="number">2</span></span><br><span class="line">prs = Presentation()</span><br><span class="line"><span class="comment"># è·å–pptå¤§å°</span></span><br><span class="line">width = prs.slide_width</span><br><span class="line">height = prs.slide_height</span><br><span class="line"><span class="comment"># å›¾ç‰‡å¤§å°ç¼©æ”¾</span></span><br><span class="line">rescale = <span class="number">1</span> </span><br><span class="line"><span class="comment"># width = Inches(6)</span></span><br><span class="line"><span class="comment"># height = Inches(4.5)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾ç‰‡</span></span><br><span class="line">pic_files = <span class="built_in">sorted</span>(os.listdir(img_folder))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(pic_files), pics_per_page):</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å¹»ç¯ç‰‡</span></span><br><span class="line">    slide = prs.slides.add_slide(prs.slide_layouts[<span class="number">6</span>])</span><br><span class="line">    <span class="comment"># åœ¨å¹»ç¯ç‰‡ä¸­æ·»åŠ å›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(pics_per_page):</span><br><span class="line">        <span class="keyword">if</span> i + j &gt;= <span class="built_in">len</span>(pic_files):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># æ‰“å¼€å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">        img_path = os.path.join(img_folder, pic_files[i + j])</span><br><span class="line">        img = Image.<span class="built_in">open</span>(img_path)</span><br><span class="line">        width_, height_ = img.size</span><br><span class="line">        <span class="comment"># è·å–å›¾ç‰‡é•¿é«˜æ¯”ä¾‹</span></span><br><span class="line">        ratio = height_ / width_</span><br><span class="line">        <span class="comment"># è®¡ç®—å›¾ç‰‡åœ¨å¹»ç¯ç‰‡ä¸­çš„ä½ç½®å’Œå¤§å°</span></span><br><span class="line">        <span class="comment"># left = Inches(j * 5)</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        top = j * height / <span class="number">2</span></span><br><span class="line">        width_rescale = width * rescale</span><br><span class="line">        height_rescale = width_rescale * ratio</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å°†å›¾ç‰‡æ·»åŠ åˆ°å¹»ç¯ç‰‡ä¸­</span></span><br><span class="line">        pic = slide.shapes.add_picture(img_path, left, top, width=width_rescale, height=height_rescale)</span><br><span class="line"><span class="comment"># ä¿å­˜PPTæ–‡ä»¶</span></span><br><span class="line">prs.save(<span class="string">&#x27;output.pptx&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><p>è¿™æ®µä»£ç é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„PPTæ–‡ä»¶ï¼Œç„¶åéå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶ã€‚å¯¹äºæ¯ä¸¤ä¸ªå›¾ç‰‡æ–‡ä»¶ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„å¹»ç¯ç‰‡ï¼Œå¹¶å°†ä¸¤å¼ å›¾ç‰‡æ·»åŠ åˆ°å¹»ç¯ç‰‡ä¸­ã€‚æœ€åï¼Œå®ƒå°†PPTæ–‡ä»¶ä¿å­˜åˆ°æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶ä¸­ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨äº†sorted()å‡½æ•°æ¥ç¡®ä¿å›¾ç‰‡æŒ‰ç…§æ–‡ä»¶åçš„å­—æ¯é¡ºåºæ’åºã€‚</p><p>åœ¨å¹»ç¯ç‰‡ä¸­ï¼Œæ¯å¼ å›¾ç‰‡çš„å®½å’Œpptå¤§å°ä¿æŒä¸€ç›´ï¼Œé«˜åº¦æŒ‰ç…§æ¯”ä¾‹ç¼©å°ï¼Œæ¯å¼ pptä¸Šä¸‹æ’åˆ—ä¸¤å¼ å›¾ç‰‡ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´è¿™äº›å€¼ã€‚</p><p>add_pictureåçš„å››ä¸ªå‚æ•°åˆ†åˆ«ä¸ºå›¾ç‰‡æ”¾ç½®çš„å·¦ä¸Šåæ ‡ï¼Œä»¥åŠå®½åº¦å’Œé«˜åº¦ï¼Œåæ ‡å¦‚ä¸‹ï¼š</p><p><img src="/2023/04/24/python%E5%88%B6%E4%BD%9C%E5%9B%BE%E7%89%87ppt/image-20230424155501482.png" alt="image-20230424155501482"></p><p>å‚æ•°è¯´æ˜ï¼š</p><p>å¾€å³ï¼Œleftå˜å¤§ï¼Œå¾€ä¸‹ï¼Œtopå˜å¤§</p><p>ğŸŒŸæ³¨æ„ï¼š å›¾ç‰‡çš„sizeä¸ºåƒç´ å•ä½ï¼Œæ³¨æ„å’ŒInchesä¹‹é—´çš„æ¢ç®—</p><h1 id="å¤šä¸ªç›®å½•"><a href="#å¤šä¸ªç›®å½•" class="headerlink" title="å¤šä¸ªç›®å½•"></a>å¤šä¸ªç›®å½•</h1><p>å¦‚æœæœ‰å¤šä¸ªç›®å½•ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„å›¾ç‰‡å•ç‹¬ä¿å­˜åˆ°pptä¸­ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦å†åµŒå¥—ä¸€å±‚forå¾ªç¯ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†pathlibåº“<a href="https://zhuanlan.zhihu.com/p/139783331/">æ•™ç¨‹</a> ï¼Œæ“ä½œè·¯å¾„æ¯”osåº“æ–¹ä¾¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pptx <span class="keyword">import</span> Presentation</span><br><span class="line"><span class="keyword">from</span> pptx.util <span class="keyword">import</span> Inches</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line">path= Path(<span class="string">&#x27;testFlag&#x27;</span>)</span><br><span class="line"><span class="comment"># åŒ¹é…å­è·¯å¾„</span></span><br><span class="line">pathlists = <span class="built_in">list</span>(path.glob(<span class="string">&quot;Loop*&quot;</span>))</span><br><span class="line"><span class="comment"># ç¡®è®¤è·¯å¾„</span></span><br><span class="line">pprint(pathlists)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_folder <span class="keyword">in</span> pathlists:</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„PPTæ–‡ä»¶</span></span><br><span class="line">  prs = Presentation()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># å®šä¹‰æ¯é¡µæ˜¾ç¤ºçš„å›¾ç‰‡æ•°é‡</span></span><br><span class="line">  pics_per_page = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  prs = Presentation()</span><br><span class="line">  width = prs.slide_width</span><br><span class="line">  height = prs.slide_height</span><br><span class="line">  rescale = <span class="number">1</span> </span><br><span class="line">  <span class="comment"># width = Inches(6)</span></span><br><span class="line">  <span class="comment"># height = Inches(4.5)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># éå†æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾ç‰‡</span></span><br><span class="line">  pic_files = <span class="built_in">sorted</span>(img_folder.glob(<span class="string">&quot;*&quot;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(pic_files), pics_per_page):</span><br><span class="line">      <span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å¹»ç¯ç‰‡</span></span><br><span class="line">      slide = prs.slides.add_slide(prs.slide_layouts[<span class="number">6</span>])</span><br><span class="line"></span><br><span class="line">      <span class="comment"># åœ¨å¹»ç¯ç‰‡ä¸­æ·»åŠ å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(pics_per_page):</span><br><span class="line">          <span class="keyword">if</span> i + j &gt;= <span class="built_in">len</span>(pic_files):</span><br><span class="line">              <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">          <span class="comment"># æ‰“å¼€å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">          img_path = os.path.join(img_folder, pic_files[i + j])</span><br><span class="line">          img = Image.<span class="built_in">open</span>(img_path)</span><br><span class="line">          width_, height_ = img.size</span><br><span class="line">          ratio = height_ / width_</span><br><span class="line"></span><br><span class="line">          <span class="comment"># è®¡ç®—å›¾ç‰‡åœ¨å¹»ç¯ç‰‡ä¸­çš„ä½ç½®å’Œå¤§å°</span></span><br><span class="line">          <span class="comment"># left = Inches(j * 5)</span></span><br><span class="line">          left = <span class="number">0</span></span><br><span class="line">          top = j * height / <span class="number">2</span> + Inches(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">          width_rescale = width * rescale</span><br><span class="line">          height_rescale = width_rescale * ratio</span><br><span class="line">          </span><br><span class="line">          <span class="comment"># å°†å›¾ç‰‡æ·»åŠ åˆ°å¹»ç¯ç‰‡ä¸­</span></span><br><span class="line">          pic = slide.shapes.add_picture(img_path, left, top, width=width_rescale, height=height_rescale)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># ä¿å­˜PPTæ–‡ä»¶</span></span><br><span class="line">  prs.save(img_folder.parent.joinpath(img_folder.name +<span class="string">&quot;.pptx&quot;</span>))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxå®‰è£…onedrive</title>
      <link href="/2023/04/24/linux%E5%AE%89%E8%A3%85onedrive/"/>
      <url>/2023/04/24/linux%E5%AE%89%E8%A3%85onedrive/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>onedriveä½œä¸ºä¸€ä¸ªèƒ½è·¨å¹³å°çš„äº‘ç›˜ï¼Œä½¿ç”¨èµ·æ¥ç‰¹åˆ«é¦™ï¼Œæœ€è¿‘è¿˜å¢åŠ äº†å¢é‡å¤‡ä»½ã€æŸ¥çœ‹å†å²ç‰ˆæœ¬ç­‰åŠŸèƒ½ï¼Œç‰¹åˆ«é€‚åˆæœ‰å¤šä¸ªè®¾å¤‡ã€éœ€è¦é¢‘ç¹ä¼ è¾“æ•°æ®çš„ä½¿ç”¨è€…ã€‚</p><p>æˆ‘ç»å¸¸éœ€è¦åœ¨Linuxå¹³å°ä¿å­˜æ•°æ®ï¼Œå°†å¤„ç†çš„ç»“æœä¼ è¾“åˆ°winå¹³å°ä¸Šï¼Œæ‰€ä»¥åœ¨æœåŠ¡å™¨ä¸Šä¹Ÿå®‰è£…äº†OneDriveï¼Œä¸»è¦çš„åŸç†æ˜¯ç£ç›˜æŒ‚è½½ï¼Œç›¸å½“äºèµ·åˆ°â€œæ‰©å¤§â€ç£ç›˜ç©ºé—´çš„ä½œç”¨ã€‚</p><p>ä»¥contos7ä¸ºä¾‹ï¼Œä»“åº“é“¾æ¥ï¼š<a href="https://github.com/skilion/onedrive">onedrive</a></p><h1 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h1><p>éœ€è¦çš„ä¾èµ–ï¼šlibcurl-develï¼Œsqlite-devel, ç¼–è¯‘å·¥å…·dmd</p><p>å¦‚æœæœ‰rootæƒé™ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install libcurl-devel</span><br><span class="line">sudo yum install sqlite-devel</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰rootæƒé™ï¼Œé€šè¿‡ä¸‹è½½æºä»£ç ç¼–è¯‘ï¼Œä¸è¿‡éœ€è¦æŠŠè¿™äº›åŠ¨æ€åº“çš„è·¯å¾„æ·»åŠ åˆ°bashrcé‡Œé¢ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/da92ca36a220/">æ— rootæƒé™ä¸‹è§£å†³ç¼–è¯‘æ—¶çš„ä¾èµ–é—®é¢˜</a> ï¼š</p><p>å®‰è£…æœ‰å…ˆå</p><h2 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.openssl.org/source/openssl-1.0.2m.tar.gz</span><br><span class="line">tar -zxvf openssl-1.0.2m.tar.gz &amp;&amp; cd openssl-1.0.2m</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ·»åŠ sharedç”ŸæˆåŠ¨æ€åº“</span></span><br><span class="line">./config --prefix=$HOME/usr shared</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">å¸è½½ä½¿ç”¨ make clean</span><br></pre></td></tr></table></figure><h2 id="libssh2"><a href="#libssh2" class="headerlink" title="libssh2"></a>libssh2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.libssh2.org/download/libssh2-1.8.0.tar.gz</span><br><span class="line">tar -zxvf libssh2-1.8.0.tar.gz &amp;&amp; cd libssh2-1.8.0</span><br><span class="line">./configure --with-libssl-prefix=$HOME/usr/ssl --prefix=$HOME/usr</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h2 id="libcurl"><a href="#libcurl" class="headerlink" title="libcurl"></a>libcurl</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://curl.haxx.se/download/curl-7.56.1.tar.gz</span><br><span class="line">tar -zxvf curl-7.56.1.tar.gz &amp;&amp; cd curl-7.56.1</span><br><span class="line">./configure --prefix=$HOME/usr --enable-http  --enable-https --enable-ftp --enable-file --enable-proxy --enable-telnet --enable-libcurl-option --enable-ipv6 --with-lib --with-ssl</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåè®°å¾—æŠŠè·¯å¾„åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ï¼Œ</p><p>å°†ä»¥ä¸Šå†…å®¹åŠ å…¥åˆ°.bashrcä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PAHT=$LD_LIBRARY_PATH:$HOME/usr/lib64</span><br><span class="line">export LD_LIBRARY_PAHT=$LD_LIBRARY_PATH:$HOME/usr/lib</span><br><span class="line">export PKG_CONFIG_PATH=$HOME/usr/lib/pkgconfig:$HOME/usr/share/pkgconfig</span><br><span class="line">export PATH=$HOME/usr/bin:$PATH</span><br></pre></td></tr></table></figure><p>ä½¿è®¾ç½®ç”Ÿæ•ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><h2 id="æœ€åå®‰è£…dlang"><a href="#æœ€åå®‰è£…dlang" class="headerlink" title="æœ€åå®‰è£…dlang"></a>æœ€åå®‰è£…dlang</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dlang.org/install.sh </span><br><span class="line">bash install.sh install dmd-2.080.0</span><br></pre></td></tr></table></figure><p>æˆ‘å®‰è£…çš„ç‰ˆæœ¬æ˜¯dmd-2.080.0ï¼Œå®‰è£…æœ€æ–°çš„ç¨‹åºåé¢ä¼šæŠ¥é”™</p><p>å®‰è£…æˆåŠŸåï¼š</p><p><img src="/2023/04/24/linux%E5%AE%89%E8%A3%85onedrive/image_1.8ec48fc8.png"></p><p>ä½¿ç”¨ <code>source ~/dlang/dmd-2.080.0/activate</code> å‘½ä»¤å¯è¿›å…¥ç¯å¢ƒ</p><p>æ³¨æ„ï¼šonedriveå®‰è£…è¿‡ç¨‹åœ¨è¿›å…¥ç¯å¢ƒåæ‰è¿›è¡Œçš„ï¼Œå®‰è£…å®Œå†é€€å‡ºç¯å¢ƒã€‚</p><h1 id="å®‰è£…onedrive"><a href="#å®‰è£…onedrive" class="headerlink" title="å®‰è£…onedrive"></a>å®‰è£…onedrive</h1><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/abraunegg/onedrive/archive/refs/tags/v2.3.4.tar.gz</span><br><span class="line">tar zxvf v2.3.4.tar.gz</span><br><span class="line">cd onedrive-2.3.4/</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h2><p>ç”±äºä¸æ˜¯ä½¿ç”¨rootå‘½ä»¤å®‰è£…, æ‰€ä»¥éœ€è¦ä¿®æ”¹makefile.in</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim makefile.in</span><br></pre></td></tr></table></figure><ol><li>åŠ å…¥æ—¥å¿—æ–‡ä»¶è·¯å¾„</li></ol><p><img src="/2023/04/24/linux%E5%AE%89%E8%A3%85onedrive/image_2.49f672c6.png"></p><ol start="2"><li>æ›´æ”¹ç”¨æˆ·</li></ol><p><img src="/2023/04/24/linux%E5%AE%89%E8%A3%85onedrive/image_3.1df847f1.png"></p><p>å°†æ­¤å¤„çš„ -o root -g users æ”¹æˆ -o ç”¨æˆ·åï¼Œåˆ é™¤åé¢çš„-g users</p><p>å¹¶ä¸”å°†ä¸‹ä¸€è¡Œçš„onedrive åé¢çš„${DESDIR}åˆ é™¤</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=$HOME/usr &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œï¼Œç”¨deactivate é€€å‡ºç¯å¢ƒ</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h2><p>ç°åœ¨æ‚¨éœ€è¦å‘ Microsoft æˆæƒ Onedriveï¼Œä»¥ä¾¿å®ƒå¯ä»¥è®¿é—®æ‚¨çš„å¸æˆ·ã€‚åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onedrive</span><br></pre></td></tr></table></figure><p><img src="/2023/04/24/linux%E5%AE%89%E8%A3%85onedrive/image_4.c5e19314.png"></p><p>å®ƒä¼šæç¤ºæ‚¨è®¿é—®è¯¥ URL ä»¥è·å¾—æˆæƒã€‚</p><p>å¤åˆ¶æ­¤é“¾æ¥ï¼Œåœ¨windowsæµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªç©ºç™½é¡µé¢ã€‚å¤åˆ¶ URL å¹¶åœ¨æç¤ºç¬¦ä¸‹å°†å…¶ç²˜è´´åˆ°ç»ˆç«¯ä¸­ã€‚</p><p>ç™»å½•æ‚¨çš„ OneDrive å¸æˆ·ï¼Œå¹¶å¤åˆ¶æ­¤å¤„çš„é“¾æ¥ç²˜è´´åˆ°ç»ˆç«¯ã€‚</p><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼ŒOnedrive å°†å¼€å§‹å°†äº‘ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ã€‚</p><h2 id="åŒæ­¥é…ç½®"><a href="#åŒæ­¥é…ç½®" class="headerlink" title="åŒæ­¥é…ç½®"></a>åŒæ­¥é…ç½®</h2><p>æ‚¨å¯ä»¥åœ¨ Onedrive git æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°â€œconfigâ€æ–‡ä»¶ã€‚è¦æ¿€æ´»ï¼Œè¯·å°†å…¶ç§»è‡³ ~&#x2F;.config&#x2F;onedrive&#x2F;æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.config/onedrive/</span><br><span class="line">cp ~/onedrive/config ~/.config/onedrive/</span><br></pre></td></tr></table></figure><p>æ‰“å¼€é…ç½®æ–‡ä»¶ã€‚æ‚¨å¯ä»¥é…ç½®ä¸¤ä¸ªé€‰é¡¹ï¼šâ€œsync_dirâ€å’Œâ€œskip_filesâ€ã€‚</p><p>sync_dirï¼šå­˜å‚¨ OneDrive æ–‡ä»¶çš„ä½ç½®ã€‚æ”¾ç½®åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­&#x2F;ä»ä¸­åˆ é™¤çš„æ‰€æœ‰æ–‡ä»¶ï¼Œéƒ½å°†åŒæ­¥åˆ°äº‘ç«¯ã€‚</p><p>skip_filesï¼šä¸åŒæ­¥çš„æ–‡ä»¶ç±»å‹ï¼ˆæˆ–æ–‡ä»¶æ¨¡å¼ï¼‰ã€‚</p><p>å®Œæˆæ›´æ”¹åï¼Œä¿å­˜å¹¶é‡æ–°å¯åŠ¨ Onedriveã€‚</p><p>å…·ä½“é…ç½®è¯·å‚è€ƒ<a href="https://www.jianshu.com/p/017aa8ceef02/">linux onedriveé…ç½®</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxçš„matplotlibå®‰è£…arialå­—ä½“</title>
      <link href="/2023/04/23/linux%E7%9A%84matplotlib%E5%AE%89%E8%A3%85arial%E5%AD%97%E4%BD%93/"/>
      <url>/2023/04/23/linux%E7%9A%84matplotlib%E5%AE%89%E8%A3%85arial%E5%AD%97%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ç»˜å›¾ä¸­ç»å¸¸ä¼šä½¿ç”¨Arialå­—ä½“ï¼ŒlinuxæœåŠ¡å™¨ä¸Šé»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªå­—ä½“ã€‚ä¸ºäº†çœå»æ¯æ¬¡ä¿®æ”¹å­—ä½“çš„éº»çƒ¦ï¼Œåœ¨matplotlibä¸­å®‰è£…äº†è¿™ä¸ªå­—ä½“ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºmatplotlibé»˜è®¤å­—ä½“ã€‚</p><h1 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h1><h2 id="å¤åˆ¶å­—ä½“è‡³-matplotlib-åº“-fonts-x2F-ttf-ç›®å½•"><a href="#å¤åˆ¶å­—ä½“è‡³-matplotlib-åº“-fonts-x2F-ttf-ç›®å½•" class="headerlink" title="å¤åˆ¶å­—ä½“è‡³ matplotlib åº“ fonts&#x2F;ttf ç›®å½•"></a>å¤åˆ¶å­—ä½“è‡³ matplotlib åº“ fonts&#x2F;ttf ç›®å½•</h2><p>windowsä¸Šæœ‰Arialå­—ä½“ï¼Œåœ¨C:\Windows\Fonts è·¯å¾„ä¸‹ï¼Œ</p><p><img src="/2023/04/23/linux%E7%9A%84matplotlib%E5%AE%89%E8%A3%85arial%E5%AD%97%E4%BD%93/image_1.b2ef3533.png"></p><p>æ‰¾åˆ°å¹¶ä¸”å…¨éƒ¨å¤åˆ¶åˆ°linuxæœåŠ¡å™¨ä¸Šmatplotlibå­—ä½“åº“ä¸‹é¢ï¼Œ</p><p>è·¯å¾„ä¸ºï¼špython_envs_name &#x2F;lib&#x2F;python3.9&#x2F;site-packages&#x2F;matplotlib&#x2F;mpl-data&#x2F;fonts&#x2F;ttf</p><p><img src="/2023/04/23/linux%E7%9A%84matplotlib%E5%AE%89%E8%A3%85arial%E5%AD%97%E4%BD%93/image-20230423165253522.png" alt="image-20230423165253522"></p><h2 id="ä¿®æ”¹-matplotlib-åº“é…ç½®æ–‡ä»¶-matplotlibrc"><a href="#ä¿®æ”¹-matplotlib-åº“é…ç½®æ–‡ä»¶-matplotlibrc" class="headerlink" title="ä¿®æ”¹ matplotlib åº“é…ç½®æ–‡ä»¶ matplotlibrc"></a>ä¿®æ”¹ matplotlib åº“é…ç½®æ–‡ä»¶ matplotlibrc</h2><p>è·¯å¾„ï¼šenv_name&#x2F;lib&#x2F;python3.9&#x2F;site-packages&#x2F;matplotlib&#x2F;mpl-data&#x2F;matplotlibrc</p><p>æ‰“å¼€åæŸ¥æ‰¾ font.familyï¼Œå°†ArialåŠ åˆ°æœ€å‰é¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">font.serif: Arial, DejaVu Serif, Bitstream Vera Serif, Computer Modern Roman, New Century Schoolbook, Century Schoolbook L, Utopia, ITC Bookman, Bookman, Nimbus Roman No9 L, Times New Roman, Times, Palatino, Charter, serif</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">font.sans-serif: Arial,DejaVu Sans, Bitstream Vera Sans, Computer Modern Sans Serif, Lucida Grande, Verdana, Geneva, Lucid, Arial, Helvetica, Avant Garde, sans-serif</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">font.cursive: Apple Chancery, Textile, Zapf Chancery, Sand, Script MT, Felipa, Comic Neue, Comic Sans MS, cursive</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">font.fantasy: Chicago, Charcoal, Impact, Western, Humor Sans, xkcd, fantasy</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">font.monospace: DejaVu Sans Mono, Bitstream Vera Sans Mono, Computer Modern Typewriter, Andale Mono, Nimbus Mono L, Courier New, Courier, Fixed, Terminal, monospace</span></span><br></pre></td></tr></table></figure><h2 id="æ¸…é™¤-matplotlib-cache"><a href="#æ¸…é™¤-matplotlib-cache" class="headerlink" title="æ¸…é™¤ matplotlib cache"></a>æ¸…é™¤ matplotlib cache</h2><p>éœ€è¦æ¸…é™¤åŸæ¥çš„matplotlibç¼“å­˜ä¿®æ”¹çš„å­—ä½“æ‰ä¼šç”Ÿæ•ˆï¼Œæœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯æŠŠç¼“å­˜æ–‡ä»¶å¤¹ç›´æ¥åˆ é™¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /home/User/.cache/matplotlib</span><br></pre></td></tr></table></figure><h1 id="å­—ä½“è¯´æ˜"><a href="#å­—ä½“è¯´æ˜" class="headerlink" title="å­—ä½“è¯´æ˜"></a>å­—ä½“è¯´æ˜</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">font.family : sans-serif</span><br><span class="line"></span><br><span class="line">font.sans-serif : SimHei</span><br><span class="line"></span><br><span class="line">axes.unicode_minus : <span class="literal">False</span></span><br></pre></td></tr></table></figure><ol><li><p><strong style="color:#00b0f0;">sans-serif</strong>ï¼šä¸“æŒ‡è¥¿æ–‡ä¸­æ— è¡¬çº¿çš„å­—ä½“ï¼Œä¸æ±‰å­—å­—ä½“ä¸­çš„é»‘ä½“ç›¸å¯¹åº”ã€‚è¯¥ç±»å­—ä½“é€šå¸¸æ˜¯æœºæ¢°çš„å’Œç»Ÿä¸€çº¿æ¡çš„ï¼Œå®ƒä»¬å¾€å¾€æ‹¥æœ‰ç›¸åŒçš„æ›²ç‡ï¼Œç¬”ç›´çš„çº¿æ¡ï¼Œé”åˆ©çš„è½¬è§’ã€‚è¿™ç§å­—ä½“å½“å‰ç³»ç»Ÿä¸­è‚¯å®šå­˜åœ¨ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå­—ä½“ä¸€å®šèƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥é€šè¿‡ä¼šåŠ ä¸Šsans-serifæ¥ä¿è¯è°ƒç”¨ã€‚</p><p>å¸¸è§çš„æ— è¡¬çº¿å­—ä½“æœ‰ Trebuchet MS, Tahoma, Verdana, Arial, Helvetica, ä¸­æ–‡çš„å¹¼åœ†ã€éš¶ä¹¦ç­‰ç­‰ã€‚</p><p>font-familyæœ€ååŠ ä¸Šsans-serifï¼Œä¹Ÿæ˜¯ä¸ºäº†ä¿è¯èƒ½å¤Ÿè°ƒç”¨è¿™ä¸ªå­—ä½“æ—é‡Œé¢çš„å­—ä½“ï¼Œå› ä¸ºå¤§å¤šæ•°è®¡ç®—æœºé‡Œéƒ½æœ‰è¿™ç§å­—ä½“ã€‚</p></li><li><p>å…¶ä»–å­—ä½“</p></li></ol><ul><li><p>é»‘ä½“ï¼šSimHei</p></li><li><p>å®‹ä½“ï¼šSimSun</p></li><li><p>å¾®è½¯é›…é»‘ä½“ï¼šMicrosoft YaHei</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xshellè¿œç¨‹æœåŠ¡å™¨æœ¬åœ°å¯è§†åŒ–æ–¹æ³•</title>
      <link href="/2023/04/23/Xshell%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AC%E5%9C%B0%E5%8F%AF%E8%A7%86%E5%8C%96%E6%96%B9%E6%B3%95/"/>
      <url>/2023/04/23/Xshell%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AC%E5%9C%B0%E5%8F%AF%E8%A7%86%E5%8C%96%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬è¿æ¥çš„è¿œç¨‹æœåŠ¡å™¨æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œä¸èƒ½æ”¯æŒæµè§ˆå™¨åŠŸèƒ½ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦å»ºç«‹æœ¬åœ°æœåŠ¡å™¨ä¸è¿œç¨‹æœåŠ¡å™¨çš„é€šä¿¡ã€‚</p><p>ä»¥Tensorboardçš„æœ¬åœ°å¯è§†åŒ–æ–¹æ³•ä¸ºä¾‹ï¼š</p><h1 id="ä¸æ¨èï¼š"><a href="#ä¸æ¨èï¼š" class="headerlink" title="ä¸æ¨èï¼š"></a>ä¸æ¨èï¼š</h1><p>ç½‘ä¸Šå¸¸è§çš„æ–¹æ³•ï¼š</p><p>åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªSSHéš§é“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 6006:localhost:6006 username@remote\_server\_ip</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œusernameæ˜¯æ‚¨åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·åï¼Œremote_server_ipæ˜¯è¿œç¨‹æœåŠ¡å™¨çš„IPåœ°å€ã€‚</p><p>1.åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå¯åŠ¨TensorBoardï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensorboard --logdir=/path/to/logs</span><br></pre></td></tr></table></figure><p>2.æ‰¾åˆ°TensorBoardå¯åŠ¨æ—¶æ˜¾ç¤ºçš„URLï¼Œç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TensorBoard 1.14.0 at [http://localhost:6006/](http://localhost:6006/) (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure><p>3.åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œæ‰“å¼€Webæµè§ˆå™¨å¹¶è®¿é—®ä»¥ä¸‹URLï¼š</p><p><a href="http://localhost:6006/">http://localhost:6006</a></p><p>è¿™ä¸ªæ–¹æ³•æˆ‘å°è¯•äº†å¤šæ¬¡ï¼Œéƒ½ä¸æˆåŠŸï¼š</p><p><img src="/2023/04/23/Xshell%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AC%E5%9C%B0%E5%8F%AF%E8%A7%86%E5%8C%96%E6%96%B9%E6%B3%95/image_1.44605818.png"></p><p><strong style="color:#00b050;">å¯èƒ½windowsç”µè„‘ä¸é€‚ç”¨</strong></p><h1 id="æ¨èæ–¹æ³•ï¼šXshelléš§é“"><a href="#æ¨èæ–¹æ³•ï¼šXshelléš§é“" class="headerlink" title="æ¨èæ–¹æ³•ï¼šXshelléš§é“"></a>æ¨èæ–¹æ³•ï¼šXshelléš§é“</h1><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>æ‰“å¼€Xshellï¼Œå³å‡»ç›¸åº”çš„ä¼šè¯ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©å±æ€§-&gt;è¿æ¥-&gt;SSH-&gt;éš§é“-&gt;æ·»åŠ ã€‚</p><p>åœ¨ä¾¦å¬ç«¯å£å’Œç›®æ ‡ç«¯å£ä¸­å¡«å…¥ç›¸åŒçš„ç«¯å£ï¼Œæ­¤å¤„å¡«å†™äº†6006;ï¼ˆè¿™é‡Œçš„ç«¯å£å·ï¼Œä¹Ÿå¯ä»¥éšä¾¿æ¢æˆå…¶ä»–çš„ï¼Œåªè¦ä¿è¯ä¸¤å¤„ç›¸åŒå³å¯ï¼‰ã€‚</p><p><img src="/2023/04/23/Xshell%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AC%E5%9C%B0%E5%8F%AF%E8%A7%86%E5%8C%96%E6%96%B9%E6%B3%95/image_2.73d50b2e.png"></p><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>æœåŠ¡å™¨ç«¯å¯åŠ¨tensorboard</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensrboard --logdir=logåœ°å€ --port=6006</span><br></pre></td></tr></table></figure><p>æœ¬åœ°æµè§ˆå™¨æŸ¥çœ‹</p><p>ç„¶åå†æœ¬åœ°æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<a href="http://127.0.0.1:6006/">http://127.0.0.1:6006</a> æˆ–è€…localhost:6006ï¼Œå¯ä»¥é€šè¿‡tensorboardæŸ¥çœ‹ç›®å‰çš„è®­ç»ƒæƒ…å†µã€‚</p><p><img src="/2023/04/23/Xshell%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AC%E5%9C%B0%E5%8F%AF%E8%A7%86%E5%8C%96%E6%96%B9%E6%B3%95/image_3.5e37b6bd.png"></p><h1 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h1><p><a href="https://blog.csdn.net/a314688122a/article/details/81505082">https://blog.csdn.net/a314688122a/article/details/81505082</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mpirunè¿è¡Œå‚æ•°</title>
      <link href="/2023/04/20/mpirun%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0/"/>
      <url>/2023/04/20/mpirun%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºmpirunè¿è¡Œå‚æ•°å­˜åœ¨ç–‘é—®ï¼Œ<a href="https://www.cnblogs.com/devilmaycry812839668/p/15132333.html">è½¬è½½æ¥æº</a></p><p>ç›¸å…³èµ„æ–™ï¼Œå‚çœ‹å‰æ–‡ï¼š</p><p><a href="https://www.cnblogs.com/devilmaycry812839668/p/15107935.html">https://www.cnblogs.com/devilmaycry812839668/p/15107935.html</a></p><p>ç°æœ‰ç¡¬ä»¶ï¼šä¸¤å°è£…æœ‰Ubuntu18.04çš„æ“ä½œç³»ç»Ÿï¼ˆä¸‹é¢ç®€ç§°Aç”µè„‘ï¼ŒBç”µè„‘ï¼‰</p><p>Aç”µè„‘ï¼š 24ç‰©ç†æ ¸å¿ƒï¼ˆ48é€»è¾‘æ ¸å¿ƒï¼‰</p><p>Bç”µè„‘ï¼š6ç‰©ç†æ ¸å¿ƒï¼ˆ12é€»è¾‘æ ¸å¿ƒï¼‰</p><p>ç½‘ç»œï¼š</p><p>Aã€Bç”µè„‘ä¹‹é—´ä½¿ç”¨100Mä»¥å¤ªç½‘äº¤æ¢æœºè¿æ¥ï¼ˆå°±æ˜¯TP-Linkè·¯ç”±å™¨ï¼‰ã€‚</p><p>å…¶ä¸­ï¼ŒAç”µè„‘IPä¸º 192.168.11.66ï¼Œ Bç”µè„‘IPä¸º 192.168.11.206</p><p>æœ¬æ–‡ä¸­çš„ä»£ç    x.py  :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mpi4py <span class="keyword">import</span> MPI</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">comm = MPI.COMM_WORLD</span><br><span class="line">size = comm.Get_size()</span><br><span class="line">rank = comm.Get_rank()</span><br><span class="line"> </span><br><span class="line">sendbuf = np.zeros(<span class="number">100</span>*<span class="number">10000</span>, dtype=<span class="string">&#x27;i&#x27;</span>) + rank</span><br><span class="line">recvbuf = <span class="literal">None</span></span><br><span class="line"><span class="keyword">if</span> rank == <span class="number">0</span>:</span><br><span class="line">    recvbuf = np.empty([size, <span class="number">100</span>*<span class="number">10000</span>], dtype=<span class="string">&#x27;i&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>( MPI.Get_processor_name() )</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">a = time.time()</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>):</span><br><span class="line">    comm.Gather(sendbuf, recvbuf, root=<span class="number">0</span>)</span><br><span class="line">b = time.time()</span><br><span class="line"><span class="keyword">if</span> rank == <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(b-a)</span><br></pre></td></tr></table></figure><p>æœ¬æ–‡æ‰€æœ‰çš„å‘½ä»¤å‡ä¸ºåœ¨ä¸»æœºAä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥æœ¬æ–‡ä¸­å¯¹myhostsæ–‡ä»¶çš„ç¼–å†™éƒ½æ˜¯åœ¨Aä¸»æœºä¸‹è¿›è¡Œçš„ã€‚</p><h1 id="å‚æ•°-â€“machinefile"><a href="#å‚æ•°-â€“machinefile" class="headerlink" title="å‚æ•°   â€“machinefile"></a>å‚æ•°   â€“machinefile</h1><p>è¯¥å‚æ•°ä¸»è¦æ˜¯ç”¨åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œåœ¨å•æœºç¯å¢ƒè¯¥å‚æ•°æ²¡æœ‰æ„ä¹‰ã€‚è¯¥å‚æ•°å°±æ˜¯æŒ‡å®šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹æœ‰å‡ å°ä¸»æœºï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šæ¯å°ä¸»æœºæœ€å¤šå¯ä»¥å¼€å‡ ä¸ªCPUè¿›è¡Œè®¡ç®—ã€‚</p><p>å…·ä½“å‘½ä»¤:</p><p><code>mpirun -np 8  --machinefile myhosts   /home/xxx/anaconda3/bin/python x.py</code></p><p>å…¶ä¸­ï¼Œ myhosts ä¸ºæˆ‘ä»¬éœ€è¦ç¼–å†™çš„æ–‡æœ¬æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æŒ‡å®šmpiåˆ†å¸ƒå¼ç¯å¢ƒä¸‹å„ä¸ªä¸»æœºçš„IPåŠå¯ä»¥è¿è¡Œçš„æœ€å¤šCPUæ•°ã€‚</p><p>myhostsæ–‡ä»¶æœ€åŸºæœ¬çš„è®¾ç½®å°±æ˜¯ä¸æŒ‡å®šæ¯ä¸ªä¸»æœºæœ€å¤šå¯ä»¥è¿è¡Œçš„CPUæ•°ï¼Œé‚£ä¹ˆæ­¤æ—¶æ¯å°ä¸»æœºæœ€å¤šå¯ä»¥è¿è¡Œçš„CPUæ•°ä¸ºå¤šå°‘å‘¢ï¼Œè¿™æ—¶æ¯å°ä¸»æœºæœ€å¤šå¯ä»¥è¿è¡Œçš„CPUæ•°ä¸ºè¯¥ä¸»æœºçš„ç‰©ç†CPUæ ¸å¿ƒæ•°ï¼Œæœ¬æ–‡ä¸­ä¸»æœºA 192.168.11.66çš„æœ€å¤šå¯ä»¥è¿è¡ŒCPUæ•°ä¸º24ï¼Œ ä¸»æœºB 192.168.11.206æœ€å¤šå¯ä»¥è¿è¡Œçš„CPUæ•°ä¸º6ã€‚</p><p>æœ€åŸºæœ¬çš„ myhosts ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat myhosts</span><br><span class="line">192.168.11.66       </span><br><span class="line">192.168.11.206 </span><br></pre></td></tr></table></figure><p>myhostsä¸­ç»™å‡ºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¸¤ä¸ªä¸»æœºIPï¼Œæ­¤æ—¶æ¯ä¸ªä¸»æœºæœ€å¤šå¯ä»¥ä½¿ç”¨çš„CPUæ•°ä¸ºç‰©ç†æ ¸å¿ƒä¸ªæ•°ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 8  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤º8ä¸ªè¿›ç¨‹å‡è¿è¡Œåœ¨ä¸»æœºAä¸Š ï¼ˆå› ä¸ºè¿è¡Œå‘½ä»¤æœ¬èº«å°±æ˜¯åœ¨ä¸»æœºAä¸Šè¿è¡Œçš„ï¼Œ&#x3D;&#x3D;æ‰€æœ‰ä¼˜å…ˆä½¿ç”¨ä¸»æœºAçš„è®¡ç®—èµ„æº&#x3D;&#x3D;ï¼‰ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p>`mpirun -np 24 â€“machinefile myhosts &#x2F;home&#x2F;xxxxxx&#x2F;anaconda3&#x2F;bin&#x2F;python x.py`</p><p>è¿è¡Œç»“æœæ˜¾ç¤º24ä¸ªè¿›ç¨‹å‡è¿è¡Œåœ¨ä¸»æœºAä¸Š ï¼ˆå› ä¸ºè¿è¡Œå‘½ä»¤æœ¬èº«å°±æ˜¯åœ¨ä¸»æœºAä¸Šè¿è¡Œçš„ï¼Œæ‰€æœ‰ä¼˜å…ˆä½¿ç”¨ä¸»æœºAçš„è®¡ç®—èµ„æºï¼‰ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 25  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤ºå…±è¿è¡Œ25ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­24ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºAä¸Šï¼Œ ä¸€ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºBä¸Š ï¼ˆå› ä¸ºè¿è¡Œå‘½ä»¤æœ¬èº«å°±æ˜¯åœ¨ä¸»æœºAä¸Šè¿è¡Œçš„ï¼Œæ‰€æœ‰ä¼˜å…ˆä½¿ç”¨ä¸»æœºAçš„è®¡ç®—èµ„æºï¼‰ã€‚</p><p>å› ä¸ºä¸»æœºAæœ€å¤šå¯ä»¥åˆ©ç”¨çš„CPUä¸ªæ•°ä¸º24ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºBä¸Šã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 30  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤ºå…±è¿è¡Œ30ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­24ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºAä¸Šï¼Œ 6ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºBä¸Š ï¼ˆå› ä¸ºè¿è¡Œå‘½ä»¤æœ¬èº«å°±æ˜¯åœ¨ä¸»æœºAä¸Šè¿è¡Œçš„ï¼Œæ‰€æœ‰ä¼˜å…ˆä½¿ç”¨ä¸»æœºAçš„è®¡ç®—èµ„æºï¼‰ã€‚</p><p>å› ä¸ºä¸»æœºAæœ€å¤šå¯ä»¥åˆ©ç”¨çš„CPUä¸ªæ•°ä¸º24ï¼Œæ‰€ä»¥éœ€è¦æœ‰6ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºBä¸Šã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 31  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæŠ¥é”™ï¼Œæ˜¾ç¤ºä¿¡æ¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------</span><br><span class="line">There are notenough slots available inthe system to satisfy the <span class="number">31</span></span><br><span class="line">slots that were requested by the application:</span><br><span class="line">/home/xxxxxx/anaconda3/<span class="built_in">bin</span>/python</span><br><span class="line">Either request fewer slots foryour application, <span class="keyword">or</span> make more slots</span><br><span class="line">available <span class="keyword">for</span> use.</span><br><span class="line">A <span class="string">&quot;slot&quot;</span>isthe Open MPI term <span class="keyword">for</span> an allocatable unit where we can</span><br><span class="line">launch a process.  The number of slots available are defined by the</span><br><span class="line">environment <span class="keyword">in</span> which Open MPI processes are run:</span><br><span class="line"><span class="number">1.</span> Hostfile, via <span class="string">&quot;slots=N&quot;</span> clauses (N defaults to number of</span><br><span class="line">     processor cores ifnot provided)</span><br><span class="line">  <span class="number">2.</span> The --host command line parameter, via a <span class="string">&quot;:N&quot;</span> suffix on the</span><br><span class="line">     hostname (N defaults to <span class="number">1</span> ifnot provided)</span><br><span class="line">  <span class="number">3.</span> Resource manager (e.g., SLURM, PBS/Torque, LSF, etc.)</span><br><span class="line">  <span class="number">4.</span> If none of a hostfile, the --host command line parameter, <span class="keyword">or</span> an</span><br><span class="line">     RM <span class="keyword">is</span> present, Open MPI defaults to the number of processor cores</span><br><span class="line">In <span class="built_in">all</span> the above cases, <span class="keyword">if</span> you want Open MPI to default to the number</span><br><span class="line">of hardware threads instead of the number of processor cores, use the</span><br><span class="line">--use-hwthread-cpus option.</span><br><span class="line">Alternatively, you can use the --oversubscribe option to ignore the</span><br><span class="line">number of available slots when deciding the number of processes to</span><br><span class="line">launch.</span><br><span class="line">--------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºå¯ä»¥è¿è¡Œçš„CPUä¸ªæ•°ä¸å¤Ÿï¼Œå› ä¸ºAä¸»æœºæœ€å¤šè¿è¡Œ24ä¸ªCPUï¼ŒBä¸»æœºæœ€å¤šè¿è¡Œ6ä¸ªCPUï¼Œæ‰€ä»¥å½“å‰ç³»ç»Ÿä¸‹æœ€å¤šå¯ä»¥è¿è¡Œçš„CPUä¸ªæ•°ä¸º30ï¼Œè¶…å‡ºè¿™ä¸ªä¸ªæ•°åˆ™ä¼šæŠ¥é”™ã€‚</p><h1 id="å‚æ•°-slots"><a href="#å‚æ•°-slots" class="headerlink" title="å‚æ•°  slots"></a>å‚æ•°  slots</h1><p>è¿›é˜¶ç‰ˆçš„myhostsçš„ç¼–å†™ï¼ŒæŒ‡å®šæ¯ä¸ªä¸»æœºæœ€å¤šå¯ä»¥ä½¿ç”¨çš„CPUä¸ªæ•°ï¼Œè¿™ä¸ªCPUä¸ªæ•°æœ€å¥½æ˜¯å°äºæŒ‡å®šä¸»æœºçš„ç‰©ç†æ ¸å¿ƒæ•°ï¼Œå¦åˆ™è¯¥è®¾å®šæ²¡æœ‰æ„ä¹‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat myhosts</span><br><span class="line">192.168.11.66       slots=4</span><br><span class="line">192.168.11.206      slots=4</span><br></pre></td></tr></table></figure><p>æŒ‡å®šä¸»æœºA ã€Bä¸­æ¯ä¸ªä¸»æœºæœ€å¤šå¯ä»¥ä½¿ç”¨cpuä¸ªæ•°å‡ä¸º4ï¼Œå…¶ä¸­æ¯ä¸ªä¸»æœºIPï¼ˆæˆ–ä¸»æœºåï¼‰åé¢çš„çš„slotsçš„æ•°å€¼å¯ä»¥è‡ªç”±è®¾å®šï¼Œä¸è¿‡åªèƒ½å°äºç­‰äºè¯¥ä¸»æœºçš„ç‰©ç†æ ¸å¿ƒæ•°ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 4  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤º4ä¸ªè¿›ç¨‹å…¨éƒ¨è¿è¡Œåœ¨ä¸»æœºAä¸Šã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 6  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤º4ä¸ªè¿›ç¨‹å…¨éƒ¨è¿è¡Œåœ¨ä¸»æœºAä¸Šï¼Œ2ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºBä¸Šã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 8  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤º4ä¸ªè¿›ç¨‹å…¨éƒ¨è¿è¡Œåœ¨ä¸»æœºAä¸Šï¼Œ4ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºBä¸Šã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 9  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæŠ¥é”™ï¼Œæ˜¾ç¤ºä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------</span><br><span class="line">There are not enough slots available in the system to satisfy the 31</span><br><span class="line">slots that were requested by the application:</span><br><span class="line"></span><br><span class="line">  /home/xxxxxx/anaconda3/bin/python</span><br><span class="line"></span><br><span class="line">Either request fewer slots for your application, or make more slots</span><br><span class="line">available for use.</span><br><span class="line"></span><br><span class="line">A &quot;slot&quot; is the Open MPI term for an allocatable unit where we can</span><br><span class="line">launch a process.  The number of slots available are defined by the</span><br><span class="line">environment in which Open MPI processes are run:</span><br><span class="line"></span><br><span class="line">  1. Hostfile, via &quot;slots=N&quot; clauses (N defaults to number of</span><br><span class="line">     processor cores if not provided)</span><br><span class="line">  2. The --host command line parameter, via a &quot;:N&quot; suffix on the</span><br><span class="line">     hostname (N defaults to 1 if not provided)</span><br><span class="line">  3. Resource manager (e.g., SLURM, PBS/Torque, LSF, etc.)</span><br><span class="line">  4. If none of a hostfile, the --host command line parameter, or an</span><br><span class="line">     RM is present, Open MPI defaults to the number of processor cores</span><br><span class="line"></span><br><span class="line">In all the above cases, if you want Open MPI to default to the number</span><br><span class="line">of hardware threads instead of the number of processor cores, use the</span><br><span class="line">--use-hwthread-cpus option.</span><br><span class="line"></span><br><span class="line">Alternatively, you can use the --oversubscribe option to ignore the</span><br><span class="line">number of available slots when deciding the number of processes to</span><br><span class="line">launch.</span><br><span class="line">--------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºå¯ä»¥è¿è¡Œçš„CPUä¸ªæ•°ä¸å¤Ÿï¼Œå› ä¸ºAä¸»æœºæˆ‘ä»¬æŒ‡å®šæœ€å¤šè¿è¡Œ4ä¸ªCPUï¼ŒBä¸»æœºæœ€å¤šè¿è¡Œ4ä¸ªCPUï¼Œæ‰€ä»¥å½“å‰ç³»ç»Ÿä¸‹æœ€å¤šå¯ä»¥è¿è¡Œçš„CPUä¸ªæ•°ä¸º8ï¼Œè¶…å‡ºè¿™ä¸ªä¸ªæ•°åˆ™ä¼šæŠ¥é”™ã€‚</p><h1 id="å‚æ•°-np-ï¼š"><a href="#å‚æ•°-np-ï¼š" class="headerlink" title="å‚æ•° -np ï¼š"></a>å‚æ•° -np ï¼š</h1><p>å¦‚æœæˆ‘ä»¬è¿è¡Œæ—¶ä¸ä½¿ç”¨ -np å‚æ•°ï¼Œ é‚£ä¹ˆè¿è¡Œæƒ…èŠ‚å¦‚ä½•å‘¢ï¼š</p><p>åœ¨  myhosts æ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.11.66</span><br><span class="line">192.168.11.206</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘½ä»¤:</p><p>`mpirun â€“machinefile myhosts &#x2F;home&#x2F;xxxxxx&#x2F;anaconda3&#x2F;bin&#x2F;python x.py`</p><p>è¿è¡Œç»“æœï¼ŒAä¸»æœºè¿è¡Œ24ä¸ªè¿›ç¨‹ï¼ŒBä¸»æœºè¿è¡Œ6ä¸ªè¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸æŒ‡å®š -npå‚æ•° &#x3D;&#x3D;æ¯ä¸ªä¸»æœºéƒ½æ˜¯ä»¥å…¨éƒ¨çš„ç‰©ç†æ ¸å¿ƒæ¥è¿è¡Œè¿›ç¨‹ã€‚&#x3D;&#x3D;</p><p>å¦‚æœåœ¨  myhosts æ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.11.66       slots=4</span><br><span class="line">192.168.11.206      slots=4</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘½ä»¤:</p><p><code>mpirun --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœï¼ŒAä¸»æœºè¿è¡Œ4ä¸ªè¿›ç¨‹ï¼ŒBä¸»æœºè¿è¡Œ4ä¸ªè¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸æŒ‡å®š -npå‚æ•° å’Œä¹‹å‰ä¸€æ ·æ¯ä¸ªä¸»æœºéƒ½æ˜¯ä»¥å…¨éƒ¨çš„å¯ä»¥è¿è¡Œçš„CPUä¸ªæ•°æ¥è¿è¡Œè¿›ç¨‹ã€‚ï¼ˆå› ä¸ºè¿™é‡Œåœ¨myhostsæ–‡ä»¶ä¸­ä½¿ç”¨äº†slotså‚æ•°å·²ç»è®¾å®šäº†Aä¸»æœºæœ€å¤šå¯ä»¥ä½¿ç”¨4ä¸ªCPUï¼ŒBä¸»æœºæœ€å¤šå¯ä»¥ä½¿ç”¨4ä¸ªCPUï¼‰</p><h1 id="å‚æ•°-nolocal"><a href="#å‚æ•°-nolocal" class="headerlink" title="å‚æ•°  -nolocal"></a>å‚æ•°  -nolocal</h1><p>åœ¨æ‰§è¡Œmpiå‘½ä»¤æ—¶åŠ å…¥å‚æ•° -nolocal åˆ™æŒ‡å®šä¸è¿è¡Œå½“å‰æ‰€åœ¨ä¸»æœºä¸Šçš„CPUï¼Œå…·ä½“ï¼š</p><p>å‡è®¾myhostsæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat myhosts</span><br><span class="line">192.168.11.66       slots=4</span><br><span class="line">192.168.11.206      slots=4</span><br></pre></td></tr></table></figure><p>myhosts æ–‡ä»¶æŒ‡å®šAã€Bä¸»æœºå‡åªèƒ½æœ€å¤šä½¿ç”¨4ä¸ªCPUã€‚</p><p>åœ¨ä¸»æœºA 192.168.11.66 ä¸Šè¿è¡Œå‘½ä»¤ï¼š</p><p>`mpirun -nolocal â€“machinefile myhosts &#x2F;home&#x2F;xxxxxx&#x2F;anaconda3&#x2F;bin&#x2F;python x.py`</p><p>æŠ¥é”™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------</span><br><span class="line">There are notenough slots available inthe system to satisfy the 8</span><br><span class="line">slots that were requested by the application:</span><br><span class="line">/home/xxxxxx/anaconda3/bin/python</span><br><span class="line">Either request fewer slots foryour application, or make more slots</span><br><span class="line">available for use.</span><br><span class="line">A &quot;slot&quot;isthe Open MPI term for an allocatable unit where we can</span><br><span class="line">launch a process.  The number of slots available are defined by the</span><br><span class="line">environment in which Open MPI processes are run:</span><br><span class="line">1. Hostfile, via &quot;slots=N&quot; clauses (N defaults to number of</span><br><span class="line">     processor cores ifnot provided)</span><br><span class="line">  2. The --host command line parameter, via a &quot;:N&quot; suffix on the</span><br><span class="line">     hostname (N defaults to 1 ifnot provided)</span><br><span class="line">  3. Resource manager (e.g., SLURM, PBS/Torque, LSF, etc.)</span><br><span class="line">  4. If none of a hostfile, the --host command line parameter, or an</span><br><span class="line">     RM is present, Open MPI defaults to the number of processor cores</span><br><span class="line">In all the above cases, if you want Open MPI to default to the number</span><br><span class="line">of hardware threads instead of the number of processor cores, use the</span><br><span class="line">--use-hwthread-cpus option.</span><br><span class="line">Alternatively, you can use the --oversubscribe option to ignore the</span><br><span class="line">number of available slots when deciding the number of processes to</span><br><span class="line">launch.</span><br><span class="line">--------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ -nolocal ä¸å…è®¸æœ¬åœ°ä¸»æœºAå‚ä¸è®¡ç®—ï¼Œè€Œ myhostsæ–‡ä»¶ä¸­åˆå…è®¸Aä¸»æœºå‚ä¸è®¡ç®—ï¼Œå› æ­¤é€ æˆå†²çªã€‚åœ¨æ²¡æœ‰ä½¿ç”¨ -np å‚æ•°çš„æƒ…å†µä¸‹æ˜¯éœ€è¦ä½¿ç”¨myhostsæ–‡ä»¶ä¸­æŒ‡å®šçš„CPUæ•°çš„æœ€å¤§å€¼æ¥è¿è¡Œçš„ï¼Œä½†æ˜¯-nolocalä¸å…è®¸Aä¸»æœºå‚ä¸è¿è¡Œæ— æ³•æ»¡è¶³myhostsæ–‡ä»¶ä¸­çš„8ä¸ªCPUçš„è®¾å®šï¼Œå› æ­¤æŠ¥é”™ã€‚</p><p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„è¿è¡Œè¯­å¥ä¸­æ”¹è¿›ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p><p><code> mpirun -np 6  -nolocal  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>ä¾æ—§æŠ¥é”™è¯¯ï¼š</p><p><code>There are notenough slots available inthe system to satisfy the 6 slots that were requested by the application:</code></p><p>åŸå› æ˜¯ä¸ä½¿ç”¨æœ¬åœ°ä¸»æœºAçš„æƒ…å†µä¸‹ -np æŒ‡å®šéœ€è¦6ä¸ªCPUè¿è¡Œï¼Œä½†æ˜¯myhostsä¸­æŒ‡å®šBä¸»æœº192.168.11.206æœ€å¤šå¯ä»¥è¿è¡Œ4ä¸ªCPUï¼Œå› æ­¤ä¸æ»¡è¶³6ä¸ªCPUè¿è¡Œçš„è¦æ±‚æŠ¥é”™ã€‚</p><p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„è¿è¡Œè¯­å¥ä¸­æ”¹è¿›ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p><p><code> mpirun -np 4  -nolocal  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸè¿è¡Œã€‚å››ä¸ªè¿›ç¨‹å…¨éƒ¨è¿è¡Œåœ¨Bä¸»æœº192.168.11.206 ä¸Šã€‚æ—¢æ»¡è¶³ -np 4 ä¹Ÿæ»¡è¶³ -nolocal è®¾å®šï¼ŒåŒæ—¶ä¹Ÿæ»¡è¶³ myhostsä¸­çš„è®¾å®šã€‚</p><p>åŒç†ï¼š</p><p>ä¸Šé¢çš„è¿è¡Œè¯­å¥ä¸­æ”¹è¿›ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p><p><code> mpirun -np 2  -nolocal  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸè¿è¡Œã€‚2ä¸ªè¿›ç¨‹å…¨éƒ¨è¿è¡Œåœ¨Bä¸»æœº192.168.11.206 ä¸Šã€‚æ—¢æ»¡è¶³ -np 2 ä¹Ÿæ»¡è¶³ -nolocal è®¾å®šï¼ŒåŒæ—¶ä¹Ÿæ»¡è¶³ myhostsä¸­çš„è®¾å®šã€‚</p><h1 id="å‚æ•°-â€“use-hwthread-cpus-ä¸-â€“oversubscribe"><a href="#å‚æ•°-â€“use-hwthread-cpus-ä¸-â€“oversubscribe" class="headerlink" title="å‚æ•°  â€“use-hwthread-cpus  ä¸  â€“oversubscribe"></a>å‚æ•°  â€“use-hwthread-cpus  ä¸  â€“oversubscribe</h1><p>å‰é¢æˆ‘ä»¬çŸ¥é“ Aã€Bä¸»æœºçš„CPUç‰©ç†æ ¸å¿ƒä¸ªæ•°ï¼š</p><p>Aç”µè„‘ï¼š 24ç‰©ç†æ ¸å¿ƒï¼ˆ48é€»è¾‘æ ¸å¿ƒï¼‰</p><p>Bç”µè„‘ï¼š6ç‰©ç†æ ¸å¿ƒï¼ˆ12é€»è¾‘æ ¸å¿ƒï¼‰</p><p>&#x3D;&#x3D;-np æŒ‡å®šè¯¥æ¬¡è¿è¡Œä¸€å…±éœ€è¦çš„CPUä¸ªæ•°&#x3D;&#x3D;ï¼Œ-nolocal æŒ‡å®šä¸ä½¿ç”¨å½“å‰ä¸»æœºçš„CPUè¿›è¡Œè¿ç®—ï¼Œmyhostsä¸­æŒ‡å®šå‚ä¸è®¡ç®—çš„å„ä¸»æœºçš„æœ€å¤šå‚ä¸è®¡ç®—çš„CPUä¸ªæ•°ã€‚</p><p>æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€è¯´çš„ï¼Œmyhostsæ–‡ä»¶ä¸­è™½ç„¶å¯ä»¥æŒ‡å®šæ¯ä¸ªä¸»æœºæœ€å¤šå¯ä»¥ä½¿ç”¨çš„CPUä¸ªæ•°ï¼Œä½†æ˜¯è¿™ä¸ªä¸ªæ•°æ˜¯æˆ‘ä»¬äººä¸ºè®¾å®šçš„ï¼Œè®¾å®šçš„ä¸€ä¸ªè¦æ±‚å°±æ˜¯è¦å°äºä¸»æœºçš„ç‰©ç†æ ¸å¿ƒä¸ªæ•°ã€‚å¦‚æœmyhosts ä¸­slotsæŒ‡å®šçš„CPUæ•°é‡ç­‰äºä¸»æœºç‰©ç†æ ¸å¿ƒä¸ªæ•°é‚£ä¹ˆslotsæœ¬èº«æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºmyhostsä¸­ä¸ä½¿ç”¨slotsè®¾å®šæ‰€èƒ½ä½¿ç”¨çš„æœ€å¤šCPUä¸ªæ•°ä¹Ÿæ˜¯è¯¥ä¸»æœºçš„ç‰©ç†æ ¸å¿ƒä¸ªæ•°ã€‚</p><p>é‚£ä¹ˆ myhosts ä¸­slotsçš„ä¸ªæ•°è®¾å®šçœŸçš„ä¸èƒ½å¤§äºä¸»æœºçš„ç‰©ç†æ ¸å¿ƒæ•°ï¼Œå…¶å®ä¸ç„¶ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬é»˜è®¤è¦æ±‚slotsä¸ªæ•°ä¸èƒ½å¤§äºç‰©ç†æ ¸å¿ƒæ•°æ˜¯å› ä¸ºåœ¨<strong>ç‹¬å </strong>ä¸»æœºè¿›è¡Œ<strong>è®¡ç®—å¯†é›†å‹</strong>è¿ç®—æ—¶å½“ä¸»æœºä¸Šè¿è¡Œçš„è¿›ç¨‹æ•°ç­‰äºç‰©ç†æ ¸å¿ƒæ•°æ—¶å¾€å¾€ä¼šå¾—åˆ°æœ€é«˜çš„åˆ©ç”¨ç‡ã€‚</p><p>ä¸€ä¸ªéšè—çŸ¥è¯†ï¼Œæ ¹æ®Intel cpuçš„ç™½çš®ä¹¦ï¼ˆè“çš®ä¹¦ï¼‰å¯ä»¥çœ‹åˆ°åœ¨ä½¿ç”¨è¶…æµæ°´çº¿å¤šçº¿ç¨‹è¿ç®—æ—¶å¯†é›†è®¡ç®—å‹è®¡ç®—æ€§èƒ½å¯ä»¥æé«˜30%ï¼Œè¿™å°±æ˜¯è¯´åœ¨Intelè¶…æµæ°´çº¿æŠ€æœ¯æ”¯æŒä¸‹ï¼Œå¯†é›†è®¡ç®—ä»»åŠ¡å•ä¸»æœºä¸‹è¿›ç¨‹æ•°ç­‰äºé€»è¾‘æ ¸å¿ƒä¸ªæ•°å…¶æ€§èƒ½è¦&#x3D;&#x3D;è¶…è¿›ç¨‹æ•°ç­‰äºç‰©ç†æ ¸å¿ƒæ•°&#x3D;&#x3D;æ—¶çš„30%ï¼Œä¸è¿‡è¿™åªæ˜¯åœ¨çŸ­æ—¶é—´è®¡ç®—æƒ…æ™¯ä¸‹ï¼Œå¦‚æœåœ¨é•¿æ—¶é—´è¿è¡Œæƒ…å†µä¸‹å½“è¿›ç¨‹æ•°ç­‰äºé€»è¾‘æ ¸å¿ƒæ•°æ—¶è®¡ç®—å¯†é›†å‹ä»»åŠ¡å¾€å¾€ä¼šå¯¼è‡´CPUçš„æ•£çƒ­æ’åˆ°åŠŸç‡å¢™ï¼ˆæ•£çƒ­å¢™ï¼‰ä»è€Œå¯¼è‡´å¤§å¹…åº¦CPUé™é¢‘ï¼Œä»è€Œå¯¼è‡´è®¡ç®—æ€§èƒ½å¤§å¹…ä¸‹é™ï¼Œå½“ç„¶è¿™è¯´çš„æ˜¯æ™®é€šæ•£çƒ­æƒ…å†µä¸‹ï¼Œå› æ­¤åœ¨è¿›è¡Œè®¡ç®—å¯†é›†å‹è®¡ç®—ä»»åŠ¡æ—¶æˆ‘ä»¬éƒ½æ˜¯é»˜è®¤è®¾å®šè¿›ç¨‹æ•°ç­‰äºç‰©ç†æ ¸å¿ƒæ•°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ myhosts æ–‡ä»¶ä¸­è®¾å®š slots ä¸ªæ•°è¶…è¿‡ä¸»æœºçš„ç‰©ç†æ ¸å¿ƒæ•°åœ¨ä¸è€ƒè™‘è®¡ç®—æ€§èƒ½çš„æƒ…å†µä¸‹æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚</p><p>ç»™å‡ºæ­¤æ—¶çš„myhostså†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat myhosts</span><br><span class="line">192.168.11.66       slots=100</span><br><span class="line">192.168.11.206      slots=100</span><br></pre></td></tr></table></figure><p>è¿è¡Œè¯­å¥ä¸­å¦‚ä¸‹ï¼š</p><p><code>mpirun -np 200  --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸè¿è¡Œã€‚å…±è¿è¡Œ200ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­100ä¸ªè¿›ç¨‹è¿è¡Œåœ¨Aä¸»æœº192.168.11.66 ä¸Šï¼Œ 100ä¸ªè¿›ç¨‹è¿è¡Œåœ¨Bä¸»æœº192.168.11.206 ä¸Šã€‚</p><p>ç”±æ­¤å¯è§ä½¿ç”¨ myhostsæ–‡ä»¶ä¸­çš„slotsè®¾å®šä¹Ÿæ˜¯å¯ä»¥è¿è¡Œè¶…è¿‡ç‰©ç†æ ¸å¿ƒæ•°çš„è¿›ç¨‹çš„ã€‚</p><p>åˆšæ‰è¯´çš„æ˜¯åœ¨ä½¿ç”¨ â€“machinefile å‚æ•° åˆ©ç”¨myhosts æ–‡ä»¶ä¸­çš„è®¾å®šæ¥å®ç°è¶…è¿‡ç‰©ç†æ ¸å¿ƒæ•°çš„è¿›ç¨‹æ•°é‡è¿è¡Œçš„ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨ â€“machinefile å‚æ•°çš„æƒ…å†µä¸‹å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><h1 id="å‚æ•°-â€“host"><a href="#å‚æ•°-â€“host" class="headerlink" title="å‚æ•° â€“host"></a>å‚æ•° â€“host</h1><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 8  --host 192.168.11.66:4 --host 192.168.11.206:4   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸåœ¨Aä¸»æœº192.168.11.66ä¸»æœºä¸Šè¿è¡Œ4ä¸ªè¿›ç¨‹ï¼Œåœ¨Bä¸»æœº192.168.11.206ä¸Šè¿è¡Œ4ä¸ªè¿›ç¨‹ï¼Œå…±è¿è¡Œ8ä¸ªè¿›ç¨‹ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 6  --host 192.168.11.206:6   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸåœ¨Bä¸»æœº192.168.11.206ä¸Šè¿è¡Œ6ä¸ªè¿›ç¨‹ï¼Œå…±è¿è¡Œ6ä¸ªè¿›ç¨‹ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 200  --host 192.168.11.66:100 --host 192.168.11.206:100   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸåœ¨Aä¸»æœº192.168.11.66ä¸»æœºä¸Šè¿è¡Œ100ä¸ªè¿›ç¨‹ï¼Œåœ¨Bä¸»æœº192.168.11.206ä¸Šè¿è¡Œ100ä¸ªè¿›ç¨‹ï¼Œå…±è¿è¡Œ200ä¸ªè¿›ç¨‹ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 200 --host 192.168.11.206:200   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸåœ¨åœ¨Bä¸»æœº192.168.11.206ä¸Šè¿è¡Œ200ä¸ªè¿›ç¨‹ï¼Œå…±è¿è¡Œ200ä¸ªè¿›ç¨‹ã€‚</p><p>å½“ç„¶ä¸Šé¢çš„éƒ½æ˜¯åœ¨åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸‹è¿è¡Œçš„ï¼ˆ åˆ†å¸ƒå¼ç¯å¢ƒä¸‹æ˜¯æŒ‡ä½¿ç”¨ â€“host å‚æ•°ï¼‰ã€‚</p><p>å¦‚æœä¸ä½¿ç”¨ â€“host å‚æ•°ï¼Œåœ¨å•æœºç¯å¢ƒä¸‹å¦‚ä½•å®ç°è¶…è¿‡ç‰©ç†æ ¸å¿ƒæ•°çš„è¿›ç¨‹æ•°è¿è¡Œå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>å¦‚ï¼š</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 48   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>å‘½ä»¤çš„å«ä¹‰æ˜¯åœ¨Aä¸»æœº192.168.11.66ä¸Šè¿è¡Œ48ä¸ªè¿›ç¨‹ï¼Œè€ŒAä¸»æœºçš„ç‰©ç†æ ¸å¿ƒæ•°ä¸º24ï¼Œå› æ­¤æŠ¥é”™ã€‚</p><p>There are notenough slots available inthe system to satisfy the 48<br>slots that were requested by the application:</p><p>è¿™æ—¶æ”¹ç”¨å‘½ä»¤ï¼šï¼ˆåŠ å…¥å‚æ•° â€“use-hwthread-cpus ï¼‰</p><p>--use-hwthread-cpus å‚æ•°çš„å«ä¹‰æ˜¯å…è®¸å½“å‰ä¸»æœºè¿è¡Œçš„è¿›ç¨‹æœ€å¤§æ•°ä¸ºé€»è¾‘æ ¸å¿ƒæ•°è€Œä¸æ˜¯ç‰©ç†æ ¸å¿ƒæ•°ã€‚</p><p><code>mpirun -np 48 --use-hwthread-cpus  /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸåœ¨åœ¨Aä¸»æœº192.168.11.66ä¸Šè¿è¡Œ48ä¸ªè¿›ç¨‹ï¼ŒAä¸»æœºä¸ºå½“å‰å‘½ä»¤æ‰§è¡Œæ—¶æ‰€åœ¨çš„ä¸»æœºï¼Œå…¶é€»è¾‘æ ¸å¿ƒæ•°ä¸º48ã€‚</p><p>æ”¹å‘½ä»¤ä¸ºï¼š</p><p><code>mpirun -np 49 --use-hwthread-cpus  /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œå¤±è´¥ï¼Œå› ä¸º â€“use-hwthread-cpus å‚æ•°åªèƒ½è®¾å®šæœ€å¤šè¿è¡Œè¿›ç¨‹æ•°ä¸ºé€»è¾‘æ ¸å¿ƒæ•°ï¼Œå› æ­¤è¶…è¿‡48åæŠ¥é”™ï¼ˆAä¸»æœºé€»è¾‘æ ¸å¿ƒæ•°ä¸º48ï¼‰ã€‚</p><p>è¿™æ—¶æ”¹ç”¨ å‚æ•° â€“oversubscribe ï¼š</p><p>--oversubscribe å‚æ•°çš„å«ä¹‰å°±æ˜¯ä¸å¯¹è¿›ç¨‹æ•°è®¾é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›ç¨‹æ•°å¯ä»¥éšä¾¿è®¾ç½®ã€‚</p><p>æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><p><code>mpirun -np 200  --oversubscribe  /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>æˆåŠŸåœ¨Aä¸»æœº192.168.11.66ä¸Šè¿è¡Œäº†200ä¸ªè¿›ç¨‹ã€‚</p><h1 id="é™„åŠ å†…å®¹ï¼š"><a href="#é™„åŠ å†…å®¹ï¼š" class="headerlink" title="é™„åŠ å†…å®¹ï¼š"></a>é™„åŠ å†…å®¹ï¼š</h1><p>åœ¨æ‰§è¡Œmpiç¨‹åºæ—¶rank0è¿›ç¨‹æ˜¯åœ¨å“ªä¸ªä¸»æœºä¸Šå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>ï¼ˆrank0è¿›ç¨‹å°±æ˜¯mpiç¨‹åºè¿è¡Œårankæ’åå·ä¸º0å·çš„è¿›ç¨‹ï¼‰</p><p>åœ¨ä¸»æœºA 192.168.11.66 ä¸Šï¼š</p><p>myhostsæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.11.66       slots=4</span><br><span class="line">192.168.11.206      slots=4</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 8   --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤ºï¼Œrank0è¿›ç¨‹è¿è¡Œåœ¨Aä¸»æœº 192.168.11.66ä¸Šã€‚</p><p>åŒç†ï¼š</p><p>åœ¨ä¸»æœºB 192.168.11.206 ä¸Šï¼š</p><p>myhostsæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.11.66       slots=4</span><br><span class="line">192.168.11.206      slots=4</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>mpirun -np 8   --machinefile myhosts   /home/xxxxxx/anaconda3/bin/python x.py</code></p><p>è¿è¡Œç»“æœæ˜¾ç¤ºï¼Œrank0è¿›ç¨‹è¿è¡Œåœ¨Bä¸»æœº 192.168.11.206ä¸Šã€‚</p><p>ç”±ä¸Šé¢çš„è¿è¡Œæƒ…å†µæˆ‘ä»¬å¯ä»¥çŸ¥é“ rank0 è¿›ç¨‹ä¸€èˆ¬éƒ½æ˜¯è¿è¡Œåœ¨å¯åŠ¨mpiç¨‹åºå¹¶ä½¿ç”¨CPUè¿è¡Œè¿›ç¨‹çš„ä¸»æœºä¸Šï¼ˆéœ€è¦æ’é™¤ä½¿ç”¨å‚æ•° -nolocal çš„æƒ…å†µï¼Œè¯¥ç§æƒ…å†µå¯åŠ¨mpiç¨‹åºçš„ä¸»æœºæ˜¯ä¸ä½¿ç”¨CPUå‚ä¸è®¡ç®—çš„ï¼Œå› æ­¤rank0è¿›ç¨‹æ­¤æ—¶æ˜¯ä¸åœ¨å¯åŠ¨mpiç¨‹åºçš„ä¸»æœºä¸Šçš„ï¼‰</p>]]></content>
      
      
      
        <tags>
            
            <tag> mpirun </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode-basic</title>
      <link href="/2023/04/20/vscode-basic/"/>
      <url>/2023/04/20/vscode-basic/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h1><p>æ‰“å¼€<a href="https://code.visualstudio.com/">Vscode</a> å®˜ç½‘ç›´æ¥ä¸‹è½½å³å¯</p><h1 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h1><ol><li><p>Python</p><p>Pythonä¸ºVSCodeæ·»åŠ äº†å¯¹Pythonçš„è¯­è¨€æ”¯æŒï¼ŒåŒ…æ‹¬ IntelliSense å’ŒDebuggingç­‰åŠŸèƒ½</p></li></ol><p><img src="/2023/04/20/vscode-basic/image-20230420145247297.png" alt="image-20230420145247297"></p><ol start="2"><li><p>Jupyter</p><p>  Jupyterä¸ºVSCodeæ·»åŠ äº†å¯¹Jupyter Notebookçš„åŠŸèƒ½æ”¯æŒ</p></li></ol><p><img src="/2023/04/20/vscode-basic/image-20230420145530009.png" alt="image-20230420145530009"></p><ol start="3"><li><p>Code Runner</p><p>Code Runnerç”¨äºç›´æ¥è¿è¡Œå¤šç§è¯­è¨€çš„ä»£ç ç‰‡æ®µæˆ–æ–‡ä»¶</p></li></ol><p><img src="/2023/04/20/vscode-basic/image-20230420145551529.png" alt="image-20230420145551529"></p><ol start="4"><li><p>Better Comments</p><p>Better Commentsä¸ºä»£ç æ³¨é‡Šæä¾›å„ç§ç‰¹å®šç±»å‹æ³¨é‡Šçš„é«˜äº®ã€‚</p></li></ol><p> <img src="/2023/04/20/vscode-basic/image-20230420145609253.png" alt="image-20230420145609253"></p><ol start="5"><li><p>Bracket Pair Colorizer</p><p>ç»™åŒ¹é…çš„æ‹¬å·ç€è‰²</p></li><li><p>Indent-Rainbow</p><p>è®©ç¼©è¿›å¸¦æœ‰é¢œè‰²</p></li><li><p>Path Intellisense</p><p>è‡ªåŠ¨å®Œæˆæ–‡ä»¶å</p></li><li><p>Prettier - Code formatter</p><p>æ›´ä¼˜é›…çš„ä»£ç æ ¼å¼åŒ–,vscode é‡Œæ¯”è¾ƒä¼˜ç§€çš„ä¸€ä¸ªæ ¼å¼åŒ–æ’ä»¶</p></li><li><p>matlabæ’ä»¶</p><p>æ”¯æŒè‡ªåŠ¨è¡¥å…¨ã€è·³è½¬å®šä¹‰ã€å˜é‡é‡å‘½å </p></li><li><p>Remote-SSH</p></li></ol><p><img src="/2023/04/20/vscode-basic/image-20230420145707498.png" alt="image-20230420145707498"></p><ol start="11"><li><p>Markdown Preview Enhancedï¼ˆmarkdown é¢„è§ˆå¢å¼ºï¼‰</p></li><li><p>GitHub Pull Requests and Issues</p><p>è‡ªåŠ¨è¯†åˆ«ä»“åº“å˜åŠ¨ï¼Œä¸€é”®pushå’Œpullï¼Œç‰¹åˆ«æ–¹ä¾¿</p><p><img src="/2023/04/20/vscode-basic/image-20230423173040299.png" alt="image-20230423173040299"></p></li><li><p>WD-TabNine</p><p>éå¸¸å¼ºå¤§çš„ä»£ç è‡ªåŠ¨è¡¥å…¨å·¥å…·</p></li></ol><h1 id="Remote-SSHè¿æ¥"><a href="#Remote-SSHè¿æ¥" class="headerlink" title="Remote-SSHè¿æ¥"></a>Remote-SSHè¿æ¥</h1><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>å®‰è£…Remote-SSHRä¹‹åï¼Œç‚¹å‡»ç•Œé¢å·¦ä¸‹è§’çš„æ‰“å¼€è¿œç¨‹çª—å£</p><p><img src="/2023/04/20/vscode-basic/image-20230420145744807.png" alt="image-20230420145744807"></p><p>é€‰æ‹©Connect to Host</p><p><img src="/2023/04/20/vscode-basic/image-20230420145758242.png" alt="image-20230420145758242"></p><p>é€‰æ‹©Add New SSH Host</p><p><img src="/2023/04/20/vscode-basic/image-20230420145807767.png" alt="image-20230420145807767"></p><p>è¾“å…¥å¯¹åº”çš„ç”¨æˆ·åå’Œè¿œç¨‹IPåœ°å€</p><p><img src="/2023/04/20/vscode-basic/image-20230420145813675.png" alt="image-20230420145813675"></p><p>åœ¨å¼¹å‡ºçš„è®¾ç½®é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œé€‰æ‹©ç¬¬ä¸€é¡¹</p><p><img src="/2023/04/20/vscode-basic/image-20230420145819225.png" alt="image-20230420145819225"></p><p>ç•Œé¢å³ä¸‹è§’æ˜¾ç¤ºHost added!</p><p><img src="/2023/04/20/vscode-basic/image-20230420145824770.png" alt="image-20230420145824770"></p><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><p>æ·»åŠ hostæˆåŠŸä¹‹åï¼Œå†ç‚¹å‡»å·¦ä¸‹è§’çš„æ‰“å¼€è¿œç¨‹è¿æ¥çª—å£ï¼Œ</p><p>  <img src="/2023/04/20/vscode-basic/image-20230420145829467.png" alt="image-20230420145829467"></p><p>å°±ä¼šå‡ºç°åˆšåˆšé…ç½®å¥½çš„hostï¼Œç‚¹å‡»ï¼Œè¾“å…¥å¯†ç ï¼Œå°±å¯ä»¥æˆåŠŸç™»å½•äº†</p><p> <img src="/2023/04/20/vscode-basic/image-20230420145837776.png" alt="image-20230420145837776"></p><h2 id="é…ç½®å…å¯†ç™»å½•"><a href="#é…ç½®å…å¯†ç™»å½•" class="headerlink" title="é…ç½®å…å¯†ç™»å½•"></a>é…ç½®å…å¯†ç™»å½•</h2><p>ç™»å½•æˆåŠŸåï¼Œä¸ºäº†é¿å…æ¯æ¬¡è¾“å…¥å¯†ç ï¼Œåœ¨linuxæœåŠ¡å™¨ä¸Šæ·»åŠ å…¬é’¥ï¼ˆå‚è€ƒæ·»åŠ å…¬é’¥åˆ°githubï¼‰;</p><p>åœ¨è¿œç¨‹ç»ˆç«¯ä¸Š</p><p>å…ˆå®šä½ç›®å½•<br><code> cd .ssh</code></p><p>å†çœ‹çœ‹æœ‰æ²¡æœ‰authorized_keysæ–‡ä»¶ï¼š<br> <code>ls</code></p><p>ç„¶åç¼–è¾‘å®ƒ<br><code> vim authorized_keys</code></p><p>ç„¶åæŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼<br> ç„¶åæŠŠæœ¬æœº åç¼€.pubæ–‡ä»¶ï¼ˆæ¯”å¦‚id_rsa.pubï¼‰çš„å†…å®¹ç²˜è´´ä¸Šå»ï¼š<br> ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDPsqZlc1lASXIwrOSpyyghF+U ä¸€å¤§ä¸²</p><p>æœ€å æŒ‰ESC ç„¶åè¾“å…¥:wq ï¼ˆå†™å…¥å†…å®¹å¹¶quité€€å‡ºï¼‰<br> ç„¶åå…³é—­vscodeçª—å£è‡ªåŠ¨æ–­å¼€é“¾æ¥ï¼Œå†æŒ‰ ç¬¬3æ­¥ ç›´æ¥ç‚¹å‡» ç„¶åç›´æ¥è¿æ¥ä¸Šå¹¶æˆåŠŸç™»å½•ï¼</p><h1 id="ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„jypyter"><a href="#ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„jypyter" class="headerlink" title="ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„jypyter"></a>ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„jypyter</h1><h2 id="å¯åŠ¨jupyper-æœåŠ¡å™¨"><a href="#å¯åŠ¨jupyper-æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨jupyper æœåŠ¡å™¨"></a>å¯åŠ¨jupyper æœåŠ¡å™¨</h2><p>åœ¨ç»ˆç«¯æ¿€æ´»å¯¹åº”çš„conda è™šæ‹Ÿç¯å¢ƒä¹‹åï¼Œè¾“å…¥jupyter notebookï¼Œå¯åŠ¨jupyteræœåŠ¡å™¨</p><p><img src="/2023/04/20/vscode-basic/image-20230420145849003.png" alt="image-20230420145849003"></p><p>å¤åˆ¶ä¸‹é¢çš„åœ°å€ï¼Œä¸¤ä¸ªéƒ½å¯ä»¥</p><p><img src="/2023/04/20/vscode-basic/image-20230420145854628.png" alt="image-20230420145854628"></p><h2 id="vscodeä¸­è¿æ¥è¿œç¨‹jupyter"><a href="#vscodeä¸­è¿æ¥è¿œç¨‹jupyter" class="headerlink" title="vscodeä¸­è¿æ¥è¿œç¨‹jupyter"></a>vscodeä¸­è¿æ¥è¿œç¨‹jupyter</h2><p>å®‰è£…juyteræ‹“å±•åï¼ŒæŒ‰å¿«æ·é”®æ‰“å¼€è¾“å…¥æ¡†ï¼Œè¾“å…¥jupyterä»¥åå°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œé€‰æ‹©ä¸ºè¿æ¥æŒ‡å®šjupyteræœåŠ¡å™¨</p><p><img src="/2023/04/20/vscode-basic/image-20230420145901403.png" alt="image-20230420145901403"></p><p>ä¹‹åè¿›å…¥ä»¥ä¸‹ç•Œé¢ï¼Œéœ€è¦è¾“å…¥åˆšåˆšå·²å¯åŠ¨çš„jupyter notebookçš„URLè¿æ¥ï¼Œå¦‚ä¸Šçš„ä¸¤ä¸ªé“¾æ¥ï¼Œå¤åˆ¶è¾“å…¥æ¡†ä¸­æŒ‰å›è½¦å°±å¯ä»¥è¿æ¥æœåŠ¡å™¨ä¸Šçš„jupyter</p><p><img src="/2023/04/20/vscode-basic/image-20230420145907727.png" alt="image-20230420145907727"></p><p>æ­¤æ—¶å°±å¯ä»¥é€‰æ‹©æ–°å»ºæˆ–æ‰“å¼€è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ipynbæ–‡ä»¶ï¼Œå¯èƒ½ä¼šæç¤ºè¦ä¸ºè¿œç¨‹æœåŠ¡å™¨å®‰è£…pythonæ‹“å±•ï¼Œç¡®è®¤å®‰è£…å³å¯ã€‚</p><h2 id="åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ"></a>åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ</h2><p>æœåŠ¡å™¨ä¸Šé…ç½®æœ‰å¤šä¸ª <a href="https://so.csdn.net/so/search?q=conda&spm=1001.2101.3001.7020">conda</a> è™šæ‹Ÿç¯å¢ƒï¼Œå¦‚æœæ¯æ¬¡å¯åŠ¨jupyterä¹‹å‰éœ€è¦æ¿€æ´»å¯¹åº”çš„è™šæ‹Ÿç¯å¢ƒï¼Œåç»­å°±ä¸æ–¹ä¾¿åˆ‡æ¢ï¼Œ</p><p>ä½¿ç”¨nb_conda_kernels æ·»åŠ æ‰€æœ‰ç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda activate base   # could be also some other environment</span><br><span class="line"></span><br><span class="line">conda install nb_conda_kernels</span><br><span class="line"></span><br><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½åï¼Œæ‰“å¼€ jupyter notebook å°±ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„ conda ç¯å¢ƒ</p><p><img src="/2023/04/20/vscode-basic/image-20230420145917965.png" alt="image-20230420145917965"></p>]]></content>
      
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
